/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js!./src/style.css":
/*!*******************************************************************************************************************!*\
  !*** ./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js!./src/style.css ***!
  \*******************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
// extracted by mini-css-extract-plugin


/***/ }),

/***/ "./src/style.css":
/*!***********************!*\
  !*** ./src/style.css ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! !../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js */ "./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js");
/* harmony import */ var _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! !../node_modules/style-loader/dist/runtime/styleDomAPI.js */ "./node_modules/style-loader/dist/runtime/styleDomAPI.js");
/* harmony import */ var _node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! !../node_modules/style-loader/dist/runtime/insertBySelector.js */ "./node_modules/style-loader/dist/runtime/insertBySelector.js");
/* harmony import */ var _node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! !../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js */ "./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js");
/* harmony import */ var _node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! !../node_modules/style-loader/dist/runtime/insertStyleElement.js */ "./node_modules/style-loader/dist/runtime/insertStyleElement.js");
/* harmony import */ var _node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! !../node_modules/style-loader/dist/runtime/styleTagTransform.js */ "./node_modules/style-loader/dist/runtime/styleTagTransform.js");
/* harmony import */ var _node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _node_modules_mini_css_extract_plugin_dist_loader_js_node_modules_css_loader_dist_cjs_js_style_css__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! !!../node_modules/mini-css-extract-plugin/dist/loader.js!../node_modules/css-loader/dist/cjs.js!./style.css */ "./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js!./src/style.css");

      
      
      
      
      
      
      
      
      

var options = {};

options.styleTagTransform = (_node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5___default());
options.setAttributes = (_node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3___default());

      options.insert = _node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2___default().bind(null, "head");
    
options.domAPI = (_node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1___default());
options.insertStyleElement = (_node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4___default());

var update = _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0___default()(_node_modules_mini_css_extract_plugin_dist_loader_js_node_modules_css_loader_dist_cjs_js_style_css__WEBPACK_IMPORTED_MODULE_6__["default"], options);




       /* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (_node_modules_mini_css_extract_plugin_dist_loader_js_node_modules_css_loader_dist_cjs_js_style_css__WEBPACK_IMPORTED_MODULE_6__["default"] && _node_modules_mini_css_extract_plugin_dist_loader_js_node_modules_css_loader_dist_cjs_js_style_css__WEBPACK_IMPORTED_MODULE_6__["default"].locals ? _node_modules_mini_css_extract_plugin_dist_loader_js_node_modules_css_loader_dist_cjs_js_style_css__WEBPACK_IMPORTED_MODULE_6__["default"].locals : undefined);


/***/ }),

/***/ "./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js":
/*!****************************************************************************!*\
  !*** ./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js ***!
  \****************************************************************************/
/***/ ((module) => {



var stylesInDOM = [];

function getIndexByIdentifier(identifier) {
  var result = -1;

  for (var i = 0; i < stylesInDOM.length; i++) {
    if (stylesInDOM[i].identifier === identifier) {
      result = i;
      break;
    }
  }

  return result;
}

function modulesToDom(list, options) {
  var idCountMap = {};
  var identifiers = [];

  for (var i = 0; i < list.length; i++) {
    var item = list[i];
    var id = options.base ? item[0] + options.base : item[0];
    var count = idCountMap[id] || 0;
    var identifier = "".concat(id, " ").concat(count);
    idCountMap[id] = count + 1;
    var indexByIdentifier = getIndexByIdentifier(identifier);
    var obj = {
      css: item[1],
      media: item[2],
      sourceMap: item[3],
      supports: item[4],
      layer: item[5]
    };

    if (indexByIdentifier !== -1) {
      stylesInDOM[indexByIdentifier].references++;
      stylesInDOM[indexByIdentifier].updater(obj);
    } else {
      var updater = addElementStyle(obj, options);
      options.byIndex = i;
      stylesInDOM.splice(i, 0, {
        identifier: identifier,
        updater: updater,
        references: 1
      });
    }

    identifiers.push(identifier);
  }

  return identifiers;
}

function addElementStyle(obj, options) {
  var api = options.domAPI(options);
  api.update(obj);

  var updater = function updater(newObj) {
    if (newObj) {
      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap && newObj.supports === obj.supports && newObj.layer === obj.layer) {
        return;
      }

      api.update(obj = newObj);
    } else {
      api.remove();
    }
  };

  return updater;
}

module.exports = function (list, options) {
  options = options || {};
  list = list || [];
  var lastIdentifiers = modulesToDom(list, options);
  return function update(newList) {
    newList = newList || [];

    for (var i = 0; i < lastIdentifiers.length; i++) {
      var identifier = lastIdentifiers[i];
      var index = getIndexByIdentifier(identifier);
      stylesInDOM[index].references--;
    }

    var newLastIdentifiers = modulesToDom(newList, options);

    for (var _i = 0; _i < lastIdentifiers.length; _i++) {
      var _identifier = lastIdentifiers[_i];

      var _index = getIndexByIdentifier(_identifier);

      if (stylesInDOM[_index].references === 0) {
        stylesInDOM[_index].updater();

        stylesInDOM.splice(_index, 1);
      }
    }

    lastIdentifiers = newLastIdentifiers;
  };
};

/***/ }),

/***/ "./node_modules/style-loader/dist/runtime/insertBySelector.js":
/*!********************************************************************!*\
  !*** ./node_modules/style-loader/dist/runtime/insertBySelector.js ***!
  \********************************************************************/
/***/ ((module) => {



var memo = {};
/* istanbul ignore next  */

function getTarget(target) {
  if (typeof memo[target] === "undefined") {
    var styleTarget = document.querySelector(target); // Special case to return head of iframe instead of iframe itself

    if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {
      try {
        // This will throw an exception if access to iframe is blocked
        // due to cross-origin restrictions
        styleTarget = styleTarget.contentDocument.head;
      } catch (e) {
        // istanbul ignore next
        styleTarget = null;
      }
    }

    memo[target] = styleTarget;
  }

  return memo[target];
}
/* istanbul ignore next  */


function insertBySelector(insert, style) {
  var target = getTarget(insert);

  if (!target) {
    throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");
  }

  target.appendChild(style);
}

module.exports = insertBySelector;

/***/ }),

/***/ "./node_modules/style-loader/dist/runtime/insertStyleElement.js":
/*!**********************************************************************!*\
  !*** ./node_modules/style-loader/dist/runtime/insertStyleElement.js ***!
  \**********************************************************************/
/***/ ((module) => {



/* istanbul ignore next  */
function insertStyleElement(options) {
  var element = document.createElement("style");
  options.setAttributes(element, options.attributes);
  options.insert(element, options.options);
  return element;
}

module.exports = insertStyleElement;

/***/ }),

/***/ "./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js":
/*!**********************************************************************************!*\
  !*** ./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js ***!
  \**********************************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {



/* istanbul ignore next  */
function setAttributesWithoutAttributes(styleElement) {
  var nonce =  true ? __webpack_require__.nc : 0;

  if (nonce) {
    styleElement.setAttribute("nonce", nonce);
  }
}

module.exports = setAttributesWithoutAttributes;

/***/ }),

/***/ "./node_modules/style-loader/dist/runtime/styleDomAPI.js":
/*!***************************************************************!*\
  !*** ./node_modules/style-loader/dist/runtime/styleDomAPI.js ***!
  \***************************************************************/
/***/ ((module) => {



/* istanbul ignore next  */
function apply(styleElement, options, obj) {
  var css = "";

  if (obj.supports) {
    css += "@supports (".concat(obj.supports, ") {");
  }

  if (obj.media) {
    css += "@media ".concat(obj.media, " {");
  }

  var needLayer = typeof obj.layer !== "undefined";

  if (needLayer) {
    css += "@layer".concat(obj.layer.length > 0 ? " ".concat(obj.layer) : "", " {");
  }

  css += obj.css;

  if (needLayer) {
    css += "}";
  }

  if (obj.media) {
    css += "}";
  }

  if (obj.supports) {
    css += "}";
  }

  var sourceMap = obj.sourceMap;

  if (sourceMap && typeof btoa !== "undefined") {
    css += "\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), " */");
  } // For old IE

  /* istanbul ignore if  */


  options.styleTagTransform(css, styleElement, options.options);
}

function removeStyleElement(styleElement) {
  // istanbul ignore if
  if (styleElement.parentNode === null) {
    return false;
  }

  styleElement.parentNode.removeChild(styleElement);
}
/* istanbul ignore next  */


function domAPI(options) {
  var styleElement = options.insertStyleElement(options);
  return {
    update: function update(obj) {
      apply(styleElement, options, obj);
    },
    remove: function remove() {
      removeStyleElement(styleElement);
    }
  };
}

module.exports = domAPI;

/***/ }),

/***/ "./node_modules/style-loader/dist/runtime/styleTagTransform.js":
/*!*********************************************************************!*\
  !*** ./node_modules/style-loader/dist/runtime/styleTagTransform.js ***!
  \*********************************************************************/
/***/ ((module) => {



/* istanbul ignore next  */
function styleTagTransform(css, styleElement) {
  if (styleElement.styleSheet) {
    styleElement.styleSheet.cssText = css;
  } else {
    while (styleElement.firstChild) {
      styleElement.removeChild(styleElement.firstChild);
    }

    styleElement.appendChild(document.createTextNode(css));
  }
}

module.exports = styleTagTransform;

/***/ }),

/***/ "./src/aggregator.js":
/*!***************************!*\
  !*** ./src/aggregator.js ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Element": () => (/* reexport safe */ _element_js__WEBPACK_IMPORTED_MODULE_0__.Element),
/* harmony export */   "createFolder": () => (/* reexport safe */ _folder_js__WEBPACK_IMPORTED_MODULE_5__.createFolder),
/* harmony export */   "createTask": () => (/* reexport safe */ _task_js__WEBPACK_IMPORTED_MODULE_6__.createTask),
/* harmony export */   "loadHome": () => (/* reexport safe */ _home_js__WEBPACK_IMPORTED_MODULE_1__.loadHome),
/* harmony export */   "loadImportant": () => (/* reexport safe */ _important_js__WEBPACK_IMPORTED_MODULE_4__.loadImportant),
/* harmony export */   "loadThisWeek": () => (/* reexport safe */ _thisWeek_js__WEBPACK_IMPORTED_MODULE_3__.loadThisWeek),
/* harmony export */   "loadToday": () => (/* reexport safe */ _today_js__WEBPACK_IMPORTED_MODULE_2__.loadToday)
/* harmony export */ });
/* harmony import */ var _element_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./element.js */ "./src/element.js");
/* harmony import */ var _home_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./home.js */ "./src/home.js");
/* harmony import */ var _today_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./today.js */ "./src/today.js");
/* harmony import */ var _thisWeek_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./thisWeek.js */ "./src/thisWeek.js");
/* harmony import */ var _important_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./important.js */ "./src/important.js");
/* harmony import */ var _folder_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./folder.js */ "./src/folder.js");
/* harmony import */ var _task_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./task.js */ "./src/task.js");










/***/ }),

/***/ "./src/element.js":
/*!************************!*\
  !*** ./src/element.js ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Element": () => (/* binding */ Element)
/* harmony export */ });
class Element{
    constructor(element){
        this.element = element;
    }

    getElement(){
        return document.querySelector(this.element);
    }

    createElement(parent, id){
        const newElement = document.createElement(this.element);

        if(id!==undefined){
            if(document.getElementById(id)!==null){
                id += Math.floor(Math.random() * 1000000);
            }
            
            newElement.setAttribute('id', id);
    
            this.element += `#${id}`;
        }

        if(parent!==undefined){
            parent.append(newElement);
        }
    }

    addIcon(src){
        const icon = new Image();
        icon.src = src;
        icon.classList.add('icon');
        this.getElement().append(icon);
    }

    removeChild(child){
        this.getElement().removeChild(child);
    }

    setText(text){
        this.getElement().textContent = text;
    }

    setEvent(event, fn){
        this.getElement().addEventListener(event, fn);
    }

    setAttribute(attribute, value){
        this.getElement().setAttribute(attribute, value);
    }
}


/***/ }),

/***/ "./src/folder.js":
/*!***********************!*\
  !*** ./src/folder.js ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "createFolder": () => (/* binding */ createFolder),
/* harmony export */   "pageCover": () => (/* binding */ pageCover)
/* harmony export */ });
/* harmony import */ var _element_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./element.js */ "./src/element.js");
/* harmony import */ var _home_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./home.js */ "./src/home.js");
/* harmony import */ var _task_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./task.js */ "./src/task.js");
/* harmony import */ var _icons_delete_svg__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./icons/delete.svg */ "./src/icons/delete.svg");
/* harmony import */ var _index_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./index.js */ "./src/index.js");
/* harmony import */ var _icons_folder_png__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./icons/folder.png */ "./src/icons/folder.png");
/* harmony import */ var _storage_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./storage.js */ "./src/storage.js");








//Extend Element to take advantage of prototype methods
class Folder extends _element_js__WEBPACK_IMPORTED_MODULE_0__.Element{
    constructor(title){
        super('li');
        this.title = title;
    }
}

//Extend Element to take advantage of prototype elements
class FolderArray extends _element_js__WEBPACK_IMPORTED_MODULE_0__.Element{
    constructor(array){
        super('div.folders>ul');
        this.array = array;
    }

    pushFolder(item){
        this.array.push(item);
    }

    removeFolder(element){
        const index = this.array.findIndex((folder) => {
            return folder.element === `li#${element.id}`;
        });
        
        this.array.splice(index, 1);
    }
}

const pageCover = new _element_js__WEBPACK_IMPORTED_MODULE_0__.Element('div.pageCover');
const folderInput = new _element_js__WEBPACK_IMPORTED_MODULE_0__.Element('div.folderPopup>form>input');
const folderPopup = new _element_js__WEBPACK_IMPORTED_MODULE_0__.Element('div.folderPopup');
const addButton = new _element_js__WEBPACK_IMPORTED_MODULE_0__.Element('div.folderPopup>form>button:nth-last-child(2)');
const cancelButton = new _element_js__WEBPACK_IMPORTED_MODULE_0__.Element('div.folderPopup>form>button:last-child');
let folderArray;

//Utilize local storage if available
if((0,_storage_js__WEBPACK_IMPORTED_MODULE_6__["default"])('localStorage')){
    if(localStorage.getItem("folderArray") !== null){
        folderArray = new FolderArray(JSON.parse(localStorage.getItem("folderArray")));
    } else{
        folderArray = new FolderArray([]);
    }

} else{
    folderArray = new FolderArray([]);
}

displayFolders();

//Display a popup with a page cover so the rest of the page cannot be interacted with
function createFolder() {
    folderPopup.setAttribute('style', 'display: block;');
    pageCover.setAttribute('style', 'display: block;');
}

//Called after the delete icon has been selected
function deleteFolder(element) {
    folderArray.removeFolder(element);

    folderArray.removeChild(element);

    //Utilize local storage if available
    if((0,_storage_js__WEBPACK_IMPORTED_MODULE_6__["default"])('localStorage')){
        storeFolderArray();
    }

    (0,_home_js__WEBPACK_IMPORTED_MODULE_1__.loadHome)();
}

//Called after checking that local storage is available to store folder array
function storeFolderArray() {
    //Serialize folder array to make it easier to store and access
    const folderArraySerialized = JSON.stringify(folderArray.array);
    localStorage.setItem("folderArray", folderArraySerialized);
}

//Called after cancelling out on popup and after input has been accessed
function clearInput() {
    pageCover.setAttribute('style', 'display: none;');
    folderPopup.setAttribute('style', 'display: none');
    folderInput.getElement().value = "";
}

function displayFolders(){
    //Clear out element before displaying folders
    folderArray.getElement().innerHTML = '';

    folderArray.array.forEach((folder) => {
        const folderElement = new _element_js__WEBPACK_IMPORTED_MODULE_0__.Element('li');
        //When passing id, utilize title but without spaces to not cause errors in the DOM
        folderElement.createElement(folderArray.getElement(), folder.title.split(' ').join(''));
        folderElement.addIcon(_icons_folder_png__WEBPACK_IMPORTED_MODULE_5__);
        
        const folderSpan = new _element_js__WEBPACK_IMPORTED_MODULE_0__.Element('span');
        //When passing id, utilize title but without spaces to not cause errors in the DOM
        folderSpan.createElement(folderElement.getElement(), folder.title.split(' ').join(''));
        folderSpan.setText(folder.title);

        folderSpan.setEvent('click', () => {
            loadFolder(folder.title);
        });

        folderElement.addIcon(_icons_delete_svg__WEBPACK_IMPORTED_MODULE_3__);

        //Access the correct element by id selector
        const deleteIconElement = new _element_js__WEBPACK_IMPORTED_MODULE_0__.Element(`${folderElement.element}>img:last-child`);
        deleteIconElement.setEvent('click', () => {
            deleteFolder(deleteIconElement.getElement().parentElement);
        });

    });
}

function addFolder(){
    const folderName = folderInput.getElement().value;

    //Do not allow user to enter an empty folder name by skipping over rest of add folder algorithm
    if(folderName===''){
        alert('Please enter a title for the folder');
        return
    }

    //Do not allow folders with the same name to exist by displaying message and skipping over add folder algorithm
    const folderExists = folderArray.array.find((folder) => {
        return folder.title === folderName;
    });
    if(folderExists!==undefined){
        alert('That folder already exists. Please pick another name.');
        return;
    }

    //Anything that has made it here has a title and that title is not a duplicate
    const folder = new Folder(folderName);
    folderArray.pushFolder(folder);
    clearInput();
    displayFolders();

    //Utilize local storage if available
    if((0,_storage_js__WEBPACK_IMPORTED_MODULE_6__["default"])('localStorage')){
        storeFolderArray(); 
    }
}

//Display appropriate folder name and new task button under each folder
function loadFolder(folder) {
    (0,_home_js__WEBPACK_IMPORTED_MODULE_1__.loadHeader)(folder);
    _index_js__WEBPACK_IMPORTED_MODULE_4__.task.setAttribute('style', 'display: block');
    (0,_task_js__WEBPACK_IMPORTED_MODULE_2__.displayTasks)(folder);
}

//Listeners for the new folder popup
addButton.setEvent('click', addFolder);
cancelButton.setEvent('click', clearInput);


/***/ }),

/***/ "./src/home.js":
/*!*********************!*\
  !*** ./src/home.js ***!
  \*********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "loadHeader": () => (/* binding */ loadHeader),
/* harmony export */   "loadHome": () => (/* binding */ loadHome)
/* harmony export */ });
/* harmony import */ var _element_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./element.js */ "./src/element.js");
/* harmony import */ var _index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./index.js */ "./src/index.js");
/* harmony import */ var _task_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./task.js */ "./src/task.js");




function loadHeader(headerText){
    const contentHeader = new _element_js__WEBPACK_IMPORTED_MODULE_0__.Element('div.content>h2');
    contentHeader.setText(headerText);
}

//Display appropriate header and new task button under all tasks
function loadHome(){
    loadHeader('All Tasks');
    _index_js__WEBPACK_IMPORTED_MODULE_1__.task.setAttribute('style', 'display: block');
    const taskArray = (0,_task_js__WEBPACK_IMPORTED_MODULE_2__.displayTasks)('All Tasks');
}

/***/ }),

/***/ "./src/important.js":
/*!**************************!*\
  !*** ./src/important.js ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "loadImportant": () => (/* binding */ loadImportant)
/* harmony export */ });
/* harmony import */ var _home_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./home.js */ "./src/home.js");
/* harmony import */ var _index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./index.js */ "./src/index.js");
/* harmony import */ var _task_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./task.js */ "./src/task.js");




//Any task with a priority of high will be displayed
function loadImportant() {
    (0,_home_js__WEBPACK_IMPORTED_MODULE_0__.loadHeader)('Important');
    //Hide the new task button
    _index_js__WEBPACK_IMPORTED_MODULE_1__.task.setAttribute('style', 'display: none');
    (0,_task_js__WEBPACK_IMPORTED_MODULE_2__.displayTasks)('high');
}

/***/ }),

/***/ "./src/index.js":
/*!**********************!*\
  !*** ./src/index.js ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "task": () => (/* binding */ task)
/* harmony export */ });
/* harmony import */ var _aggregator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./aggregator.js */ "./src/aggregator.js");
/* harmony import */ var _style_css__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./style.css */ "./src/style.css");



const task = new _aggregator_js__WEBPACK_IMPORTED_MODULE_0__.Element('div.content>button:nth-child(2)');
task.setEvent('click', _aggregator_js__WEBPACK_IMPORTED_MODULE_0__.createTask);

(0,_aggregator_js__WEBPACK_IMPORTED_MODULE_0__.loadHome)();

const home = new _aggregator_js__WEBPACK_IMPORTED_MODULE_0__.Element('ul.nav>li:first-child');
home.setEvent('click', _aggregator_js__WEBPACK_IMPORTED_MODULE_0__.loadHome);

const today = new _aggregator_js__WEBPACK_IMPORTED_MODULE_0__.Element('ul.nav>li:nth-child(2)');
today.setEvent('click', _aggregator_js__WEBPACK_IMPORTED_MODULE_0__.loadToday);

const thisWeek = new _aggregator_js__WEBPACK_IMPORTED_MODULE_0__.Element('ul.nav>li:nth-child(3)');
thisWeek.setEvent('click', _aggregator_js__WEBPACK_IMPORTED_MODULE_0__.loadThisWeek);

const important = new _aggregator_js__WEBPACK_IMPORTED_MODULE_0__.Element('ul.nav>li:last-child');
important.setEvent('click', _aggregator_js__WEBPACK_IMPORTED_MODULE_0__.loadImportant);

const folder = new _aggregator_js__WEBPACK_IMPORTED_MODULE_0__.Element('div.folders>button:first-child');
folder.setEvent('click', _aggregator_js__WEBPACK_IMPORTED_MODULE_0__.createFolder);


/***/ }),

/***/ "./src/storage.js":
/*!************************!*\
  !*** ./src/storage.js ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ storageAvailable)
/* harmony export */ });
function storageAvailable(type) {
    let storage;
    try {
        storage = window[type];
        const x = '__storage_test__';
        storage.setItem(x, x);
        storage.removeItem(x);
        return true;
    }
    catch (e) {
        return e instanceof DOMException && (
            // everything except Firefox
            e.code === 22 ||
            // Firefox
            e.code === 1014 ||
            // test name field too, because code might not be present
            // everything except Firefox
            e.name === 'QuotaExceededError' ||
            // Firefox
            e.name === 'NS_ERROR_DOM_QUOTA_REACHED') &&
            // acknowledge QuotaExceededError only if there's something already stored
            (storage && storage.length !== 0);
    }
}

/***/ }),

/***/ "./src/task.js":
/*!*********************!*\
  !*** ./src/task.js ***!
  \*********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "createTask": () => (/* binding */ createTask),
/* harmony export */   "displayTasks": () => (/* binding */ displayTasks)
/* harmony export */ });
/* harmony import */ var _element_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./element.js */ "./src/element.js");
/* harmony import */ var _folder_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./folder.js */ "./src/folder.js");
/* harmony import */ var _icons_delete_svg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./icons/delete.svg */ "./src/icons/delete.svg");
/* harmony import */ var _icons_edit_svg__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./icons/edit.svg */ "./src/icons/edit.svg");
/* harmony import */ var _storage_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./storage.js */ "./src/storage.js");






//Extend Element to take advantage of prototype methods
class Task extends _element_js__WEBPACK_IMPORTED_MODULE_0__.Element {
    constructor(title, description, dateTime, priority, folder, complete){
        super('li');
        this.title = title;
        this.description = description;
        this.dateTime = dateTime;
        this.priority = priority;
        this.folder = folder;
        this.complete = complete;
    }
}

//Extend Element to take advantage of prototype methods
class TaskArray extends _element_js__WEBPACK_IMPORTED_MODULE_0__.Element {
    constructor(array) {
        super('div.content>ul');
        this.array = array;
    }

    pushTask(task) {
        this.array.push(task);
    }

    subArray(folder, date) {
        //Date value is passed form today module when selected
        if(date==='today'){
            return this.array.filter((item) => {
                const itemDate = item.dateTime;
                const itemDateString = itemDate.substring(0, 10);
                return itemDateString === folder;
            });
        //Date value is passed from this week module when selected
        } else if(date==='thisWeek'){
            return this.array.filter((item) => {
                const itemDate = item.dateTime;
                const itemYearMonth = itemDate.substring(0, 7);
                const folderYearMonth = folder.substring(0, 7);
                const folderDay = parseInt(folder.substring(8, 10));
                const itemDay = parseInt(itemDate.substring(8, 10));
                return (itemYearMonth === folderYearMonth) && (itemDay - folderDay < 7) && (itemDay - folderDay >= 0); 
            });
        //Folder value of high is passed from important 
        } else if(folder==='high') {
            return this.array.filter((item) => {
                return item.priority === folder;
            })
        }

        //Will be called when a user generated folder is passed
        return this.array.filter((item) => {
           return item.folder === folder;
        });
    }

    removeTask(element) {
        const index = this.array.findIndex((task) => {
            return task.element === `li#${element.id}`;
        });
        
        this.array.splice(index, 1);
    }
}

const addTaskButton = new _element_js__WEBPACK_IMPORTED_MODULE_0__.Element('div.taskPopup>form>button:nth-last-child(2)');
const cancelTaskButton = new _element_js__WEBPACK_IMPORTED_MODULE_0__.Element('div.taskPopup>form>button:last-child');
const addEditTaskButton = new _element_js__WEBPACK_IMPORTED_MODULE_0__.Element('div.editTaskPopup>form>button:nth-last-child(2)');
const cancelEditTaskButton = new _element_js__WEBPACK_IMPORTED_MODULE_0__.Element('div.editTaskPopup>form>button:last-child');
const taskTitleInput = new _element_js__WEBPACK_IMPORTED_MODULE_0__.Element('div.taskPopup>form>input#title');
const taskDescriptionInput = new _element_js__WEBPACK_IMPORTED_MODULE_0__.Element('div.taskPopup>form>textarea#description');
const taskDateTimeInput = new _element_js__WEBPACK_IMPORTED_MODULE_0__.Element('div.taskPopup>form>input#dateTime');
const taskPopup = new _element_js__WEBPACK_IMPORTED_MODULE_0__.Element('div.taskPopup');
const taskPriorityInput = new _element_js__WEBPACK_IMPORTED_MODULE_0__.Element('div.taskPopup>form>div>input[type="radio"]:checked');
const editTaskPopup = new _element_js__WEBPACK_IMPORTED_MODULE_0__.Element('div.editTaskPopup');
const editTaskTitleInput = new _element_js__WEBPACK_IMPORTED_MODULE_0__.Element('div.editTaskPopup>form>input#editTitle');
const editTaskDescriptionInput = new _element_js__WEBPACK_IMPORTED_MODULE_0__.Element('div.editTaskPopup>form>textarea#editDescription');
const editTaskDateTimeInput = new _element_js__WEBPACK_IMPORTED_MODULE_0__.Element('div.editTaskPopup>form>input#editDateTime');
const editTaskPriorityInput = new _element_js__WEBPACK_IMPORTED_MODULE_0__.Element('div.editTaskPopup>form>div>input[type="radio"]:checked');
const detailsPopup = new _element_js__WEBPACK_IMPORTED_MODULE_0__.Element('div.detailsPopup');
const closeDetailsIcon = new _element_js__WEBPACK_IMPORTED_MODULE_0__.Element('div.detailsPopup>img:first-child');
let editElement;
let taskArray;

//Utilize local storage if available
if((0,_storage_js__WEBPACK_IMPORTED_MODULE_4__["default"])('localStorage')){
    if(localStorage.getItem("taskArray") !== null){
        taskArray = new TaskArray(JSON.parse(localStorage.getItem("taskArray")));
    } else{
        taskArray = new TaskArray([]);
    }

} else{
    taskArray = new TaskArray([]);
}

//Display a popup with a page cover so the rest of the page cannot be interacted with
function createTask() {
    _folder_js__WEBPACK_IMPORTED_MODULE_1__.pageCover.setAttribute('style', 'display: block;');
    taskPopup.setAttribute('style', 'display: block;');
}

//Clear user input when a popup is canceled or after user info has been stored
function clearTaskInput(){
    _folder_js__WEBPACK_IMPORTED_MODULE_1__.pageCover.setAttribute('style', 'display: none;');
    taskPopup.setAttribute('style', 'display: none;');
    taskTitleInput.getElement().value = '';
    taskDescriptionInput.getElement().value = '';
    taskDateTimeInput.getElement().value = '';
    document.querySelector('div.taskPopup>form>div>input#none').checked = true;
}

/* A separate popup exists when a user wishes to edit info. 
This will clear user input when popup is canceled or after user info has been stored. */
function clearEditTaskInput() {
    _folder_js__WEBPACK_IMPORTED_MODULE_1__.pageCover.setAttribute('style', 'display: none');
    editTaskPopup.setAttribute('style', 'display: none');
    editTaskTitleInput.getElement().value = '';
    editTaskDescriptionInput.getElement().value = '';
    editTaskDateTimeInput.getElement().value = '';
    document.querySelector('div.editTaskPopup>form>div>input#editNone').checked = true;
}

//Creates and adds a new task from the task popup
function addTask() {

    //Do not allow user to enter an empty task name by skipping over rest of add task algorithm
    if(taskTitleInput.getElement().value === ''){
        alert('Please enter a title for the task.');
        return;
    }

    //Anything that has made it this far has title input
    const task = new Task(taskTitleInput.getElement().value, taskDescriptionInput.getElement().value, taskDateTimeInput.getElement().value, taskPriorityInput.getElement().value, document.querySelector('div.content>h2').textContent, false);
    taskArray.pushTask(task);
    clearTaskInput();

    displayTasks(task.folder);

    //Utilize local storage if available
    if((0,_storage_js__WEBPACK_IMPORTED_MODULE_4__["default"])('localStorage')){
        storeTaskArray(); 
    }
}

//Updates existing input from the edit task popup
function addEditTask() {
    //Search the task array for the index of the selected task to edit
    const index = taskArray.array.findIndex((task) => {
        return task.element === `li#${editElement}`;
    });

    const editedTask = new Task(editTaskTitleInput.getElement().value, editTaskDescriptionInput.getElement().value, editTaskDateTimeInput.getElement().value, editTaskPriorityInput.getElement().value, document.querySelector('div.content>h2').textContent, taskArray.array[index].complete);
    //Replace the existing task with the edited task
    taskArray.array[index] = editedTask;
    clearEditTaskInput();
    displayTasks(editedTask.folder);

    //Utilize local storage if available
    if((0,_storage_js__WEBPACK_IMPORTED_MODULE_4__["default"])('localStorage')){
        storeTaskArray(); 
    }
}

//Display edit task popup with stored info
function editTask(task) {
    _folder_js__WEBPACK_IMPORTED_MODULE_1__.pageCover.setAttribute('style', 'display: block');
    editTaskPopup.setAttribute('style', 'display: block');
    editTaskTitleInput.getElement().value = task.title;
    editTaskDescriptionInput.getElement().value = task.description;
    editTaskDateTimeInput.getElement().value = task.dateTime;

    //Check the correct priority radio button given the stored info
    if(task.priority==='none'){
        document.querySelector('div.editTaskPopup>form>div>input#editNone').checked = true;
    } else if(task.priority === 'low'){
        document.querySelector('div.editTaskPopup>form>div>input#editLow').checked = true;
    } else if(task.priority === 'medium') {
        document.querySelector('div.editTaskPopup>form>div>input#editMedium').checked = true;
    } else {
        document.querySelector('div.editTaskPopup>form>div>input#editHigh').checked = true;
    }
}

//Called after checking that local storage is available to store task array
function storeTaskArray() {
    //Serialize folder array to make it easier to store and access
    const taskArraySerialized = JSON.stringify(taskArray.array);
    localStorage.setItem("taskArray", taskArraySerialized);

}

//Called after the delete icon has been selected
function deleteTask(element) {
    taskArray.removeTask(element);

    taskArray.removeChild(element);

    //Utilize local storage if available
    if((0,_storage_js__WEBPACK_IMPORTED_MODULE_4__["default"])('localStorage')){
        storeTaskArray();
    }
}

//Called after a user has selected the checkbox next to a task
function changeTaskStatus(item, event) {
    if(event.target.checked) {
        item.complete = true;
    } else {
        item.complete = false;
    }

    //Utilize local storage if available
    if((0,_storage_js__WEBPACK_IMPORTED_MODULE_4__["default"])('localStorage')){
        storeTaskArray(); 
    }
}

//Called after the user has selected the details button under a task
function displayDetails(item) {
    _folder_js__WEBPACK_IMPORTED_MODULE_1__.pageCover.setAttribute('style', 'display: block;');
    detailsPopup.setAttribute('style', 'display: block;');

    document.querySelector('div.detailsPopup>h2').textContent = item.title;
    document.querySelector('div.detailsPopup>div.folder>span:last-child').textContent = item.folder;
    document.querySelector('div.detailsPopup>div.priority>span:last-child').textContent = item.priority;
    document.querySelector('div.detailsPopup>div.dueDate>span:last-child').textContent = item.dateTime;
    document.querySelector('div.detailsPopup>div.description>p:last-child').textContent = item.description;
}

//Called after the exit icon on the details popup has been selected
function closeDetailsPopup() {
    _folder_js__WEBPACK_IMPORTED_MODULE_1__.pageCover.setAttribute('style', 'display: none;');
    detailsPopup.setAttribute('style', 'display: none;');
}

function displayTasks(folder, date) {
    let subArray;
    //Clear out element before adding tasks
    taskArray.getElement().innerHTML = '';

    //Displays all tasks unless there is a specific folder passed
    if(folder!=='All Tasks'){
        subArray = taskArray.subArray(folder, date);
    } else{
        subArray = taskArray.array;
    }

    subArray.forEach((item) => {
        const listElement = new _element_js__WEBPACK_IMPORTED_MODULE_0__.Element('li');
        //When passing id, utilize title but without spaces to not cause errors in the DOM
        listElement.createElement(taskArray.getElement(), item.title.split(' ').join(''));
        item.element = `li#${listElement.getElement().id}`;

        //Create a checkbox for each task that will track when the task has been completed
        const taskCheckbox = document.createElement('input');
        taskCheckbox.addEventListener('change', (event) => {
            changeTaskStatus(item, event);
        });
        taskCheckbox.setAttribute('type', 'checkbox');
        taskCheckbox.id = 'complete';
        taskCheckbox.setAttribute('name', 'complete');
        //Check box if has been stored with a check value previously
        if(item.complete===true){
            taskCheckbox.checked = true;
        }
        listElement.getElement().append(taskCheckbox);
        
        const textElement = document.createElement('span');
        textElement.textContent = item.title;
        listElement.getElement().append(textElement);
        const detailsButton = document.createElement('button');
        detailsButton.textContent = 'Details';
        listElement.getElement().append(detailsButton);
        detailsButton.addEventListener('click', () => {
            displayDetails(item);
        });

        listElement.addIcon(_icons_edit_svg__WEBPACK_IMPORTED_MODULE_3__);
        listElement.addIcon(_icons_delete_svg__WEBPACK_IMPORTED_MODULE_2__);

        //Access the correct element by id selector
        const editIconElement = new _element_js__WEBPACK_IMPORTED_MODULE_0__.Element(`${listElement.element}>img:nth-last-child(2)`);
        editIconElement.setEvent('click', () => {
            editElement = editIconElement.getElement().parentElement.id;
            editTask(item);
        });

        const deleteIconElement = new _element_js__WEBPACK_IMPORTED_MODULE_0__.Element(`${listElement.element}>img:last-child`);
        deleteIconElement.setEvent('click', () => {
            deleteTask(deleteIconElement.getElement().parentElement);
        });
    });
}

//Listeners for new task popup
addTaskButton.setEvent('click', addTask);
cancelTaskButton.setEvent('click', clearTaskInput);

//Listeners for edit task popup
addEditTaskButton.setEvent('click', addEditTask);
cancelEditTaskButton.setEvent('click', clearEditTaskInput);

//Listener for details popup
closeDetailsIcon.setEvent('click', closeDetailsPopup);


/***/ }),

/***/ "./src/thisWeek.js":
/*!*************************!*\
  !*** ./src/thisWeek.js ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "loadThisWeek": () => (/* binding */ loadThisWeek)
/* harmony export */ });
/* harmony import */ var _home_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./home.js */ "./src/home.js");
/* harmony import */ var _index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./index.js */ "./src/index.js");
/* harmony import */ var _task_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./task.js */ "./src/task.js");





//Display appropriate header and send today's date to find tasks that match dates within the current weeks
function loadThisWeek() {
    (0,_home_js__WEBPACK_IMPORTED_MODULE_0__.loadHeader)('This Week');
    //Hide the new task button
    _index_js__WEBPACK_IMPORTED_MODULE_1__.task.setAttribute('style', 'display: none');
    const date = new Date();
    const year = date.getFullYear();
    let month = date.getMonth() + 1;
    //Add a 0 in front of single digit months to match how user input is stored
    if(month<10){
        month = `0${month}`;
    }
    const day = date.getDate();
    //Make today's date match how user input is stored
    const dateString = `${year}-${month}-${day}`;
    (0,_task_js__WEBPACK_IMPORTED_MODULE_2__.displayTasks)(dateString, 'thisWeek');
}

/***/ }),

/***/ "./src/today.js":
/*!**********************!*\
  !*** ./src/today.js ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "loadToday": () => (/* binding */ loadToday)
/* harmony export */ });
/* harmony import */ var _home_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./home.js */ "./src/home.js");
/* harmony import */ var _index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./index.js */ "./src/index.js");
/* harmony import */ var _task_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./task.js */ "./src/task.js");




//Display appropriate header and send today's date to find tasks that match today's date
function loadToday() {
    (0,_home_js__WEBPACK_IMPORTED_MODULE_0__.loadHeader)('Today');
    //Hide the new task button
    _index_js__WEBPACK_IMPORTED_MODULE_1__.task.setAttribute('style', 'display: none');
    const date = new Date();
    const year = date.getFullYear();
    let month = date.getMonth() + 1;
    //Make today's date match how user input is stored
    if(month<10){
        month = `0${month}`;
    }
    const day = date.getDate();
    //Make today's date match how user input is stored
    const dateString = `${year}-${month}-${day}`;
    (0,_task_js__WEBPACK_IMPORTED_MODULE_2__.displayTasks)(dateString, 'today');
}

/***/ }),

/***/ "./src/icons/delete.svg":
/*!******************************!*\
  !*** ./src/icons/delete.svg ***!
  \******************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

module.exports = __webpack_require__.p + "bde675c38d54979f589e.svg";

/***/ }),

/***/ "./src/icons/edit.svg":
/*!****************************!*\
  !*** ./src/icons/edit.svg ***!
  \****************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

module.exports = __webpack_require__.p + "b66051a044a43e47597e.svg";

/***/ }),

/***/ "./src/icons/folder.png":
/*!******************************!*\
  !*** ./src/icons/folder.png ***!
  \******************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

module.exports = __webpack_require__.p + "6b232689e76e1e6e4386.png";

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/compat get default export */
/******/ 	(() => {
/******/ 		// getDefaultExport function for compatibility with non-harmony modules
/******/ 		__webpack_require__.n = (module) => {
/******/ 			var getter = module && module.__esModule ?
/******/ 				() => (module['default']) :
/******/ 				() => (module);
/******/ 			__webpack_require__.d(getter, { a: getter });
/******/ 			return getter;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/global */
/******/ 	(() => {
/******/ 		__webpack_require__.g = (function() {
/******/ 			if (typeof globalThis === 'object') return globalThis;
/******/ 			try {
/******/ 				return this || new Function('return this')();
/******/ 			} catch (e) {
/******/ 				if (typeof window === 'object') return window;
/******/ 			}
/******/ 		})();
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/publicPath */
/******/ 	(() => {
/******/ 		var scriptUrl;
/******/ 		if (__webpack_require__.g.importScripts) scriptUrl = __webpack_require__.g.location + "";
/******/ 		var document = __webpack_require__.g.document;
/******/ 		if (!scriptUrl && document) {
/******/ 			if (document.currentScript)
/******/ 				scriptUrl = document.currentScript.src
/******/ 			if (!scriptUrl) {
/******/ 				var scripts = document.getElementsByTagName("script");
/******/ 				if(scripts.length) scriptUrl = scripts[scripts.length - 1].src
/******/ 			}
/******/ 		}
/******/ 		// When supporting browsers where an automatic publicPath is not supported you must specify an output.publicPath manually via configuration
/******/ 		// or pass an empty string ("") and set the __webpack_public_path__ variable from your code to use your own logic.
/******/ 		if (!scriptUrl) throw new Error("Automatic publicPath is not supported in this browser");
/******/ 		scriptUrl = scriptUrl.replace(/#.*$/, "").replace(/\?.*$/, "").replace(/\/[^\/]+$/, "/");
/******/ 		__webpack_require__.p = scriptUrl;
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/nonce */
/******/ 	(() => {
/******/ 		__webpack_require__.nc = undefined;
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module is referenced by other modules so it can't be inlined
/******/ 	var __webpack_exports__ = __webpack_require__("./src/index.js");
/******/ 	
/******/ })()
;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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V0N0QkE7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBLGlDQUFpQyxXQUFXO1dBQzVDO1dBQ0E7Ozs7O1dDUEE7V0FDQTtXQUNBO1dBQ0E7V0FDQSx5Q0FBeUMsd0NBQXdDO1dBQ2pGO1dBQ0E7V0FDQTs7Ozs7V0NQQTtXQUNBO1dBQ0E7V0FDQTtXQUNBLEdBQUc7V0FDSDtXQUNBO1dBQ0EsQ0FBQzs7Ozs7V0NQRDs7Ozs7V0NBQTtXQUNBO1dBQ0E7V0FDQSx1REFBdUQsaUJBQWlCO1dBQ3hFO1dBQ0EsZ0RBQWdELGFBQWE7V0FDN0Q7Ozs7O1dDTkE7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7Ozs7O1dDZkE7Ozs7O1VFQUE7VUFDQTtVQUNBO1VBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90b2RvbGlzdC8uL3NyYy9zdHlsZS5jc3M/ZTMyMCIsIndlYnBhY2s6Ly90b2RvbGlzdC8uL3NyYy9zdHlsZS5jc3M/ZDJlYSIsIndlYnBhY2s6Ly90b2RvbGlzdC8uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL2luamVjdFN0eWxlc0ludG9TdHlsZVRhZy5qcyIsIndlYnBhY2s6Ly90b2RvbGlzdC8uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL2luc2VydEJ5U2VsZWN0b3IuanMiLCJ3ZWJwYWNrOi8vdG9kb2xpc3QvLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9pbnNlcnRTdHlsZUVsZW1lbnQuanMiLCJ3ZWJwYWNrOi8vdG9kb2xpc3QvLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9zZXRBdHRyaWJ1dGVzV2l0aG91dEF0dHJpYnV0ZXMuanMiLCJ3ZWJwYWNrOi8vdG9kb2xpc3QvLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9zdHlsZURvbUFQSS5qcyIsIndlYnBhY2s6Ly90b2RvbGlzdC8uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL3N0eWxlVGFnVHJhbnNmb3JtLmpzIiwid2VicGFjazovL3RvZG9saXN0Ly4vc3JjL2FnZ3JlZ2F0b3IuanMiLCJ3ZWJwYWNrOi8vdG9kb2xpc3QvLi9zcmMvZWxlbWVudC5qcyIsIndlYnBhY2s6Ly90b2RvbGlzdC8uL3NyYy9mb2xkZXIuanMiLCJ3ZWJwYWNrOi8vdG9kb2xpc3QvLi9zcmMvaG9tZS5qcyIsIndlYnBhY2s6Ly90b2RvbGlzdC8uL3NyYy9pbXBvcnRhbnQuanMiLCJ3ZWJwYWNrOi8vdG9kb2xpc3QvLi9zcmMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vdG9kb2xpc3QvLi9zcmMvc3RvcmFnZS5qcyIsIndlYnBhY2s6Ly90b2RvbGlzdC8uL3NyYy90YXNrLmpzIiwid2VicGFjazovL3RvZG9saXN0Ly4vc3JjL3RoaXNXZWVrLmpzIiwid2VicGFjazovL3RvZG9saXN0Ly4vc3JjL3RvZGF5LmpzIiwid2VicGFjazovL3RvZG9saXN0L3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL3RvZG9saXN0L3dlYnBhY2svcnVudGltZS9jb21wYXQgZ2V0IGRlZmF1bHQgZXhwb3J0Iiwid2VicGFjazovL3RvZG9saXN0L3dlYnBhY2svcnVudGltZS9kZWZpbmUgcHJvcGVydHkgZ2V0dGVycyIsIndlYnBhY2s6Ly90b2RvbGlzdC93ZWJwYWNrL3J1bnRpbWUvZ2xvYmFsIiwid2VicGFjazovL3RvZG9saXN0L3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vdG9kb2xpc3Qvd2VicGFjay9ydW50aW1lL21ha2UgbmFtZXNwYWNlIG9iamVjdCIsIndlYnBhY2s6Ly90b2RvbGlzdC93ZWJwYWNrL3J1bnRpbWUvcHVibGljUGF0aCIsIndlYnBhY2s6Ly90b2RvbGlzdC93ZWJwYWNrL3J1bnRpbWUvbm9uY2UiLCJ3ZWJwYWNrOi8vdG9kb2xpc3Qvd2VicGFjay9iZWZvcmUtc3RhcnR1cCIsIndlYnBhY2s6Ly90b2RvbGlzdC93ZWJwYWNrL3N0YXJ0dXAiLCJ3ZWJwYWNrOi8vdG9kb2xpc3Qvd2VicGFjay9hZnRlci1zdGFydHVwIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIGV4dHJhY3RlZCBieSBtaW5pLWNzcy1leHRyYWN0LXBsdWdpblxuZXhwb3J0IHt9OyIsIlxuICAgICAgaW1wb3J0IEFQSSBmcm9tIFwiIS4uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL2luamVjdFN0eWxlc0ludG9TdHlsZVRhZy5qc1wiO1xuICAgICAgaW1wb3J0IGRvbUFQSSBmcm9tIFwiIS4uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL3N0eWxlRG9tQVBJLmpzXCI7XG4gICAgICBpbXBvcnQgaW5zZXJ0Rm4gZnJvbSBcIiEuLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9pbnNlcnRCeVNlbGVjdG9yLmpzXCI7XG4gICAgICBpbXBvcnQgc2V0QXR0cmlidXRlcyBmcm9tIFwiIS4uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL3NldEF0dHJpYnV0ZXNXaXRob3V0QXR0cmlidXRlcy5qc1wiO1xuICAgICAgaW1wb3J0IGluc2VydFN0eWxlRWxlbWVudCBmcm9tIFwiIS4uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL2luc2VydFN0eWxlRWxlbWVudC5qc1wiO1xuICAgICAgaW1wb3J0IHN0eWxlVGFnVHJhbnNmb3JtRm4gZnJvbSBcIiEuLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9zdHlsZVRhZ1RyYW5zZm9ybS5qc1wiO1xuICAgICAgaW1wb3J0IGNvbnRlbnQsICogYXMgbmFtZWRFeHBvcnQgZnJvbSBcIiEhLi4vbm9kZV9tb2R1bGVzL21pbmktY3NzLWV4dHJhY3QtcGx1Z2luL2Rpc3QvbG9hZGVyLmpzIS4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvY2pzLmpzIS4vc3R5bGUuY3NzXCI7XG4gICAgICBcbiAgICAgIFxuXG52YXIgb3B0aW9ucyA9IHt9O1xuXG5vcHRpb25zLnN0eWxlVGFnVHJhbnNmb3JtID0gc3R5bGVUYWdUcmFuc2Zvcm1Gbjtcbm9wdGlvbnMuc2V0QXR0cmlidXRlcyA9IHNldEF0dHJpYnV0ZXM7XG5cbiAgICAgIG9wdGlvbnMuaW5zZXJ0ID0gaW5zZXJ0Rm4uYmluZChudWxsLCBcImhlYWRcIik7XG4gICAgXG5vcHRpb25zLmRvbUFQSSA9IGRvbUFQSTtcbm9wdGlvbnMuaW5zZXJ0U3R5bGVFbGVtZW50ID0gaW5zZXJ0U3R5bGVFbGVtZW50O1xuXG52YXIgdXBkYXRlID0gQVBJKGNvbnRlbnQsIG9wdGlvbnMpO1xuXG5cblxuZXhwb3J0ICogZnJvbSBcIiEhLi4vbm9kZV9tb2R1bGVzL21pbmktY3NzLWV4dHJhY3QtcGx1Z2luL2Rpc3QvbG9hZGVyLmpzIS4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvY2pzLmpzIS4vc3R5bGUuY3NzXCI7XG4gICAgICAgZXhwb3J0IGRlZmF1bHQgY29udGVudCAmJiBjb250ZW50LmxvY2FscyA/IGNvbnRlbnQubG9jYWxzIDogdW5kZWZpbmVkO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbnZhciBzdHlsZXNJbkRPTSA9IFtdO1xuXG5mdW5jdGlvbiBnZXRJbmRleEJ5SWRlbnRpZmllcihpZGVudGlmaWVyKSB7XG4gIHZhciByZXN1bHQgPSAtMTtcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IHN0eWxlc0luRE9NLmxlbmd0aDsgaSsrKSB7XG4gICAgaWYgKHN0eWxlc0luRE9NW2ldLmlkZW50aWZpZXIgPT09IGlkZW50aWZpZXIpIHtcbiAgICAgIHJlc3VsdCA9IGk7XG4gICAgICBicmVhaztcbiAgICB9XG4gIH1cblxuICByZXR1cm4gcmVzdWx0O1xufVxuXG5mdW5jdGlvbiBtb2R1bGVzVG9Eb20obGlzdCwgb3B0aW9ucykge1xuICB2YXIgaWRDb3VudE1hcCA9IHt9O1xuICB2YXIgaWRlbnRpZmllcnMgPSBbXTtcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IGxpc3QubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgaXRlbSA9IGxpc3RbaV07XG4gICAgdmFyIGlkID0gb3B0aW9ucy5iYXNlID8gaXRlbVswXSArIG9wdGlvbnMuYmFzZSA6IGl0ZW1bMF07XG4gICAgdmFyIGNvdW50ID0gaWRDb3VudE1hcFtpZF0gfHwgMDtcbiAgICB2YXIgaWRlbnRpZmllciA9IFwiXCIuY29uY2F0KGlkLCBcIiBcIikuY29uY2F0KGNvdW50KTtcbiAgICBpZENvdW50TWFwW2lkXSA9IGNvdW50ICsgMTtcbiAgICB2YXIgaW5kZXhCeUlkZW50aWZpZXIgPSBnZXRJbmRleEJ5SWRlbnRpZmllcihpZGVudGlmaWVyKTtcbiAgICB2YXIgb2JqID0ge1xuICAgICAgY3NzOiBpdGVtWzFdLFxuICAgICAgbWVkaWE6IGl0ZW1bMl0sXG4gICAgICBzb3VyY2VNYXA6IGl0ZW1bM10sXG4gICAgICBzdXBwb3J0czogaXRlbVs0XSxcbiAgICAgIGxheWVyOiBpdGVtWzVdXG4gICAgfTtcblxuICAgIGlmIChpbmRleEJ5SWRlbnRpZmllciAhPT0gLTEpIHtcbiAgICAgIHN0eWxlc0luRE9NW2luZGV4QnlJZGVudGlmaWVyXS5yZWZlcmVuY2VzKys7XG4gICAgICBzdHlsZXNJbkRPTVtpbmRleEJ5SWRlbnRpZmllcl0udXBkYXRlcihvYmopO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgdXBkYXRlciA9IGFkZEVsZW1lbnRTdHlsZShvYmosIG9wdGlvbnMpO1xuICAgICAgb3B0aW9ucy5ieUluZGV4ID0gaTtcbiAgICAgIHN0eWxlc0luRE9NLnNwbGljZShpLCAwLCB7XG4gICAgICAgIGlkZW50aWZpZXI6IGlkZW50aWZpZXIsXG4gICAgICAgIHVwZGF0ZXI6IHVwZGF0ZXIsXG4gICAgICAgIHJlZmVyZW5jZXM6IDFcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGlkZW50aWZpZXJzLnB1c2goaWRlbnRpZmllcik7XG4gIH1cblxuICByZXR1cm4gaWRlbnRpZmllcnM7XG59XG5cbmZ1bmN0aW9uIGFkZEVsZW1lbnRTdHlsZShvYmosIG9wdGlvbnMpIHtcbiAgdmFyIGFwaSA9IG9wdGlvbnMuZG9tQVBJKG9wdGlvbnMpO1xuICBhcGkudXBkYXRlKG9iaik7XG5cbiAgdmFyIHVwZGF0ZXIgPSBmdW5jdGlvbiB1cGRhdGVyKG5ld09iaikge1xuICAgIGlmIChuZXdPYmopIHtcbiAgICAgIGlmIChuZXdPYmouY3NzID09PSBvYmouY3NzICYmIG5ld09iai5tZWRpYSA9PT0gb2JqLm1lZGlhICYmIG5ld09iai5zb3VyY2VNYXAgPT09IG9iai5zb3VyY2VNYXAgJiYgbmV3T2JqLnN1cHBvcnRzID09PSBvYmouc3VwcG9ydHMgJiYgbmV3T2JqLmxheWVyID09PSBvYmoubGF5ZXIpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBhcGkudXBkYXRlKG9iaiA9IG5ld09iaik7XG4gICAgfSBlbHNlIHtcbiAgICAgIGFwaS5yZW1vdmUoKTtcbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIHVwZGF0ZXI7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGxpc3QsIG9wdGlvbnMpIHtcbiAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gIGxpc3QgPSBsaXN0IHx8IFtdO1xuICB2YXIgbGFzdElkZW50aWZpZXJzID0gbW9kdWxlc1RvRG9tKGxpc3QsIG9wdGlvbnMpO1xuICByZXR1cm4gZnVuY3Rpb24gdXBkYXRlKG5ld0xpc3QpIHtcbiAgICBuZXdMaXN0ID0gbmV3TGlzdCB8fCBbXTtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGFzdElkZW50aWZpZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgaWRlbnRpZmllciA9IGxhc3RJZGVudGlmaWVyc1tpXTtcbiAgICAgIHZhciBpbmRleCA9IGdldEluZGV4QnlJZGVudGlmaWVyKGlkZW50aWZpZXIpO1xuICAgICAgc3R5bGVzSW5ET01baW5kZXhdLnJlZmVyZW5jZXMtLTtcbiAgICB9XG5cbiAgICB2YXIgbmV3TGFzdElkZW50aWZpZXJzID0gbW9kdWxlc1RvRG9tKG5ld0xpc3QsIG9wdGlvbnMpO1xuXG4gICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGxhc3RJZGVudGlmaWVycy5sZW5ndGg7IF9pKyspIHtcbiAgICAgIHZhciBfaWRlbnRpZmllciA9IGxhc3RJZGVudGlmaWVyc1tfaV07XG5cbiAgICAgIHZhciBfaW5kZXggPSBnZXRJbmRleEJ5SWRlbnRpZmllcihfaWRlbnRpZmllcik7XG5cbiAgICAgIGlmIChzdHlsZXNJbkRPTVtfaW5kZXhdLnJlZmVyZW5jZXMgPT09IDApIHtcbiAgICAgICAgc3R5bGVzSW5ET01bX2luZGV4XS51cGRhdGVyKCk7XG5cbiAgICAgICAgc3R5bGVzSW5ET00uc3BsaWNlKF9pbmRleCwgMSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgbGFzdElkZW50aWZpZXJzID0gbmV3TGFzdElkZW50aWZpZXJzO1xuICB9O1xufTsiLCJcInVzZSBzdHJpY3RcIjtcblxudmFyIG1lbW8gPSB7fTtcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICAqL1xuXG5mdW5jdGlvbiBnZXRUYXJnZXQodGFyZ2V0KSB7XG4gIGlmICh0eXBlb2YgbWVtb1t0YXJnZXRdID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgdmFyIHN0eWxlVGFyZ2V0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0YXJnZXQpOyAvLyBTcGVjaWFsIGNhc2UgdG8gcmV0dXJuIGhlYWQgb2YgaWZyYW1lIGluc3RlYWQgb2YgaWZyYW1lIGl0c2VsZlxuXG4gICAgaWYgKHdpbmRvdy5IVE1MSUZyYW1lRWxlbWVudCAmJiBzdHlsZVRhcmdldCBpbnN0YW5jZW9mIHdpbmRvdy5IVE1MSUZyYW1lRWxlbWVudCkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgLy8gVGhpcyB3aWxsIHRocm93IGFuIGV4Y2VwdGlvbiBpZiBhY2Nlc3MgdG8gaWZyYW1lIGlzIGJsb2NrZWRcbiAgICAgICAgLy8gZHVlIHRvIGNyb3NzLW9yaWdpbiByZXN0cmljdGlvbnNcbiAgICAgICAgc3R5bGVUYXJnZXQgPSBzdHlsZVRhcmdldC5jb250ZW50RG9jdW1lbnQuaGVhZDtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgLy8gaXN0YW5idWwgaWdub3JlIG5leHRcbiAgICAgICAgc3R5bGVUYXJnZXQgPSBudWxsO1xuICAgICAgfVxuICAgIH1cblxuICAgIG1lbW9bdGFyZ2V0XSA9IHN0eWxlVGFyZ2V0O1xuICB9XG5cbiAgcmV0dXJuIG1lbW9bdGFyZ2V0XTtcbn1cbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICAqL1xuXG5cbmZ1bmN0aW9uIGluc2VydEJ5U2VsZWN0b3IoaW5zZXJ0LCBzdHlsZSkge1xuICB2YXIgdGFyZ2V0ID0gZ2V0VGFyZ2V0KGluc2VydCk7XG5cbiAgaWYgKCF0YXJnZXQpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJDb3VsZG4ndCBmaW5kIGEgc3R5bGUgdGFyZ2V0LiBUaGlzIHByb2JhYmx5IG1lYW5zIHRoYXQgdGhlIHZhbHVlIGZvciB0aGUgJ2luc2VydCcgcGFyYW1ldGVyIGlzIGludmFsaWQuXCIpO1xuICB9XG5cbiAgdGFyZ2V0LmFwcGVuZENoaWxkKHN0eWxlKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBpbnNlcnRCeVNlbGVjdG9yOyIsIlwidXNlIHN0cmljdFwiO1xuXG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAgKi9cbmZ1bmN0aW9uIGluc2VydFN0eWxlRWxlbWVudChvcHRpb25zKSB7XG4gIHZhciBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInN0eWxlXCIpO1xuICBvcHRpb25zLnNldEF0dHJpYnV0ZXMoZWxlbWVudCwgb3B0aW9ucy5hdHRyaWJ1dGVzKTtcbiAgb3B0aW9ucy5pbnNlcnQoZWxlbWVudCwgb3B0aW9ucy5vcHRpb25zKTtcbiAgcmV0dXJuIGVsZW1lbnQ7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gaW5zZXJ0U3R5bGVFbGVtZW50OyIsIlwidXNlIHN0cmljdFwiO1xuXG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAgKi9cbmZ1bmN0aW9uIHNldEF0dHJpYnV0ZXNXaXRob3V0QXR0cmlidXRlcyhzdHlsZUVsZW1lbnQpIHtcbiAgdmFyIG5vbmNlID0gdHlwZW9mIF9fd2VicGFja19ub25jZV9fICE9PSBcInVuZGVmaW5lZFwiID8gX193ZWJwYWNrX25vbmNlX18gOiBudWxsO1xuXG4gIGlmIChub25jZSkge1xuICAgIHN0eWxlRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJub25jZVwiLCBub25jZSk7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBzZXRBdHRyaWJ1dGVzV2l0aG91dEF0dHJpYnV0ZXM7IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICAqL1xuZnVuY3Rpb24gYXBwbHkoc3R5bGVFbGVtZW50LCBvcHRpb25zLCBvYmopIHtcbiAgdmFyIGNzcyA9IFwiXCI7XG5cbiAgaWYgKG9iai5zdXBwb3J0cykge1xuICAgIGNzcyArPSBcIkBzdXBwb3J0cyAoXCIuY29uY2F0KG9iai5zdXBwb3J0cywgXCIpIHtcIik7XG4gIH1cblxuICBpZiAob2JqLm1lZGlhKSB7XG4gICAgY3NzICs9IFwiQG1lZGlhIFwiLmNvbmNhdChvYmoubWVkaWEsIFwiIHtcIik7XG4gIH1cblxuICB2YXIgbmVlZExheWVyID0gdHlwZW9mIG9iai5sYXllciAhPT0gXCJ1bmRlZmluZWRcIjtcblxuICBpZiAobmVlZExheWVyKSB7XG4gICAgY3NzICs9IFwiQGxheWVyXCIuY29uY2F0KG9iai5sYXllci5sZW5ndGggPiAwID8gXCIgXCIuY29uY2F0KG9iai5sYXllcikgOiBcIlwiLCBcIiB7XCIpO1xuICB9XG5cbiAgY3NzICs9IG9iai5jc3M7XG5cbiAgaWYgKG5lZWRMYXllcikge1xuICAgIGNzcyArPSBcIn1cIjtcbiAgfVxuXG4gIGlmIChvYmoubWVkaWEpIHtcbiAgICBjc3MgKz0gXCJ9XCI7XG4gIH1cblxuICBpZiAob2JqLnN1cHBvcnRzKSB7XG4gICAgY3NzICs9IFwifVwiO1xuICB9XG5cbiAgdmFyIHNvdXJjZU1hcCA9IG9iai5zb3VyY2VNYXA7XG5cbiAgaWYgKHNvdXJjZU1hcCAmJiB0eXBlb2YgYnRvYSAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgIGNzcyArPSBcIlxcbi8qIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtiYXNlNjQsXCIuY29uY2F0KGJ0b2EodW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KEpTT04uc3RyaW5naWZ5KHNvdXJjZU1hcCkpKSksIFwiICovXCIpO1xuICB9IC8vIEZvciBvbGQgSUVcblxuICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgICovXG5cblxuICBvcHRpb25zLnN0eWxlVGFnVHJhbnNmb3JtKGNzcywgc3R5bGVFbGVtZW50LCBvcHRpb25zLm9wdGlvbnMpO1xufVxuXG5mdW5jdGlvbiByZW1vdmVTdHlsZUVsZW1lbnQoc3R5bGVFbGVtZW50KSB7XG4gIC8vIGlzdGFuYnVsIGlnbm9yZSBpZlxuICBpZiAoc3R5bGVFbGVtZW50LnBhcmVudE5vZGUgPT09IG51bGwpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBzdHlsZUVsZW1lbnQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChzdHlsZUVsZW1lbnQpO1xufVxuLyogaXN0YW5idWwgaWdub3JlIG5leHQgICovXG5cblxuZnVuY3Rpb24gZG9tQVBJKG9wdGlvbnMpIHtcbiAgdmFyIHN0eWxlRWxlbWVudCA9IG9wdGlvbnMuaW5zZXJ0U3R5bGVFbGVtZW50KG9wdGlvbnMpO1xuICByZXR1cm4ge1xuICAgIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKG9iaikge1xuICAgICAgYXBwbHkoc3R5bGVFbGVtZW50LCBvcHRpb25zLCBvYmopO1xuICAgIH0sXG4gICAgcmVtb3ZlOiBmdW5jdGlvbiByZW1vdmUoKSB7XG4gICAgICByZW1vdmVTdHlsZUVsZW1lbnQoc3R5bGVFbGVtZW50KTtcbiAgICB9XG4gIH07XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZG9tQVBJOyIsIlwidXNlIHN0cmljdFwiO1xuXG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAgKi9cbmZ1bmN0aW9uIHN0eWxlVGFnVHJhbnNmb3JtKGNzcywgc3R5bGVFbGVtZW50KSB7XG4gIGlmIChzdHlsZUVsZW1lbnQuc3R5bGVTaGVldCkge1xuICAgIHN0eWxlRWxlbWVudC5zdHlsZVNoZWV0LmNzc1RleHQgPSBjc3M7XG4gIH0gZWxzZSB7XG4gICAgd2hpbGUgKHN0eWxlRWxlbWVudC5maXJzdENoaWxkKSB7XG4gICAgICBzdHlsZUVsZW1lbnQucmVtb3ZlQ2hpbGQoc3R5bGVFbGVtZW50LmZpcnN0Q2hpbGQpO1xuICAgIH1cblxuICAgIHN0eWxlRWxlbWVudC5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShjc3MpKTtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHN0eWxlVGFnVHJhbnNmb3JtOyIsImltcG9ydCB7IEVsZW1lbnQgfSBmcm9tICcuL2VsZW1lbnQuanMnO1xuaW1wb3J0IHsgbG9hZEhvbWUgfSBmcm9tICcuL2hvbWUuanMnO1xuaW1wb3J0IHsgbG9hZFRvZGF5IH0gZnJvbSAnLi90b2RheS5qcyc7XG5pbXBvcnQgeyBsb2FkVGhpc1dlZWsgfSBmcm9tICcuL3RoaXNXZWVrLmpzJztcbmltcG9ydCB7IGxvYWRJbXBvcnRhbnQgfSBmcm9tICcuL2ltcG9ydGFudC5qcyc7XG5pbXBvcnQgeyBjcmVhdGVGb2xkZXIgfSBmcm9tICcuL2ZvbGRlci5qcyc7XG5pbXBvcnQgeyBjcmVhdGVUYXNrIH0gZnJvbSAnLi90YXNrLmpzJztcblxuZXhwb3J0IHsgRWxlbWVudCwgbG9hZEhvbWUsIGxvYWRUb2RheSwgbG9hZFRoaXNXZWVrLCBsb2FkSW1wb3J0YW50LCBjcmVhdGVGb2xkZXIsIGNyZWF0ZVRhc2t9OyIsImV4cG9ydCBjbGFzcyBFbGVtZW50e1xuICAgIGNvbnN0cnVjdG9yKGVsZW1lbnQpe1xuICAgICAgICB0aGlzLmVsZW1lbnQgPSBlbGVtZW50O1xuICAgIH1cblxuICAgIGdldEVsZW1lbnQoKXtcbiAgICAgICAgcmV0dXJuIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5lbGVtZW50KTtcbiAgICB9XG5cbiAgICBjcmVhdGVFbGVtZW50KHBhcmVudCwgaWQpe1xuICAgICAgICBjb25zdCBuZXdFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0aGlzLmVsZW1lbnQpO1xuXG4gICAgICAgIGlmKGlkIT09dW5kZWZpbmVkKXtcbiAgICAgICAgICAgIGlmKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKSE9PW51bGwpe1xuICAgICAgICAgICAgICAgIGlkICs9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwMDAwMDApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBuZXdFbGVtZW50LnNldEF0dHJpYnV0ZSgnaWQnLCBpZCk7XG4gICAgXG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQgKz0gYCMke2lkfWA7XG4gICAgICAgIH1cblxuICAgICAgICBpZihwYXJlbnQhPT11bmRlZmluZWQpe1xuICAgICAgICAgICAgcGFyZW50LmFwcGVuZChuZXdFbGVtZW50KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGFkZEljb24oc3JjKXtcbiAgICAgICAgY29uc3QgaWNvbiA9IG5ldyBJbWFnZSgpO1xuICAgICAgICBpY29uLnNyYyA9IHNyYztcbiAgICAgICAgaWNvbi5jbGFzc0xpc3QuYWRkKCdpY29uJyk7XG4gICAgICAgIHRoaXMuZ2V0RWxlbWVudCgpLmFwcGVuZChpY29uKTtcbiAgICB9XG5cbiAgICByZW1vdmVDaGlsZChjaGlsZCl7XG4gICAgICAgIHRoaXMuZ2V0RWxlbWVudCgpLnJlbW92ZUNoaWxkKGNoaWxkKTtcbiAgICB9XG5cbiAgICBzZXRUZXh0KHRleHQpe1xuICAgICAgICB0aGlzLmdldEVsZW1lbnQoKS50ZXh0Q29udGVudCA9IHRleHQ7XG4gICAgfVxuXG4gICAgc2V0RXZlbnQoZXZlbnQsIGZuKXtcbiAgICAgICAgdGhpcy5nZXRFbGVtZW50KCkuYWRkRXZlbnRMaXN0ZW5lcihldmVudCwgZm4pO1xuICAgIH1cblxuICAgIHNldEF0dHJpYnV0ZShhdHRyaWJ1dGUsIHZhbHVlKXtcbiAgICAgICAgdGhpcy5nZXRFbGVtZW50KCkuc2V0QXR0cmlidXRlKGF0dHJpYnV0ZSwgdmFsdWUpO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IEVsZW1lbnQgfSBmcm9tICcuL2VsZW1lbnQuanMnO1xuaW1wb3J0IHsgbG9hZEhlYWRlciwgbG9hZEhvbWUgfSBmcm9tICcuL2hvbWUuanMnO1xuaW1wb3J0IHsgZGlzcGxheVRhc2tzIH0gZnJvbSAnLi90YXNrLmpzJztcbmltcG9ydCBkZWxldGVJY29uIGZyb20gJy4vaWNvbnMvZGVsZXRlLnN2Zyc7XG5pbXBvcnQgeyB0YXNrIH0gZnJvbSAnLi9pbmRleC5qcyc7XG5pbXBvcnQgZm9sZGVySWNvbiBmcm9tICcuL2ljb25zL2ZvbGRlci5wbmcnO1xuaW1wb3J0IHN0b3JhZ2VBdmFpbGFibGUgZnJvbSAnLi9zdG9yYWdlLmpzJztcblxuLy9FeHRlbmQgRWxlbWVudCB0byB0YWtlIGFkdmFudGFnZSBvZiBwcm90b3R5cGUgbWV0aG9kc1xuY2xhc3MgRm9sZGVyIGV4dGVuZHMgRWxlbWVudHtcbiAgICBjb25zdHJ1Y3Rvcih0aXRsZSl7XG4gICAgICAgIHN1cGVyKCdsaScpO1xuICAgICAgICB0aGlzLnRpdGxlID0gdGl0bGU7XG4gICAgfVxufVxuXG4vL0V4dGVuZCBFbGVtZW50IHRvIHRha2UgYWR2YW50YWdlIG9mIHByb3RvdHlwZSBlbGVtZW50c1xuY2xhc3MgRm9sZGVyQXJyYXkgZXh0ZW5kcyBFbGVtZW50e1xuICAgIGNvbnN0cnVjdG9yKGFycmF5KXtcbiAgICAgICAgc3VwZXIoJ2Rpdi5mb2xkZXJzPnVsJyk7XG4gICAgICAgIHRoaXMuYXJyYXkgPSBhcnJheTtcbiAgICB9XG5cbiAgICBwdXNoRm9sZGVyKGl0ZW0pe1xuICAgICAgICB0aGlzLmFycmF5LnB1c2goaXRlbSk7XG4gICAgfVxuXG4gICAgcmVtb3ZlRm9sZGVyKGVsZW1lbnQpe1xuICAgICAgICBjb25zdCBpbmRleCA9IHRoaXMuYXJyYXkuZmluZEluZGV4KChmb2xkZXIpID0+IHtcbiAgICAgICAgICAgIHJldHVybiBmb2xkZXIuZWxlbWVudCA9PT0gYGxpIyR7ZWxlbWVudC5pZH1gO1xuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIHRoaXMuYXJyYXkuc3BsaWNlKGluZGV4LCAxKTtcbiAgICB9XG59XG5cbmV4cG9ydCBjb25zdCBwYWdlQ292ZXIgPSBuZXcgRWxlbWVudCgnZGl2LnBhZ2VDb3ZlcicpO1xuY29uc3QgZm9sZGVySW5wdXQgPSBuZXcgRWxlbWVudCgnZGl2LmZvbGRlclBvcHVwPmZvcm0+aW5wdXQnKTtcbmNvbnN0IGZvbGRlclBvcHVwID0gbmV3IEVsZW1lbnQoJ2Rpdi5mb2xkZXJQb3B1cCcpO1xuY29uc3QgYWRkQnV0dG9uID0gbmV3IEVsZW1lbnQoJ2Rpdi5mb2xkZXJQb3B1cD5mb3JtPmJ1dHRvbjpudGgtbGFzdC1jaGlsZCgyKScpO1xuY29uc3QgY2FuY2VsQnV0dG9uID0gbmV3IEVsZW1lbnQoJ2Rpdi5mb2xkZXJQb3B1cD5mb3JtPmJ1dHRvbjpsYXN0LWNoaWxkJyk7XG5sZXQgZm9sZGVyQXJyYXk7XG5cbi8vVXRpbGl6ZSBsb2NhbCBzdG9yYWdlIGlmIGF2YWlsYWJsZVxuaWYoc3RvcmFnZUF2YWlsYWJsZSgnbG9jYWxTdG9yYWdlJykpe1xuICAgIGlmKGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwiZm9sZGVyQXJyYXlcIikgIT09IG51bGwpe1xuICAgICAgICBmb2xkZXJBcnJheSA9IG5ldyBGb2xkZXJBcnJheShKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwiZm9sZGVyQXJyYXlcIikpKTtcbiAgICB9IGVsc2V7XG4gICAgICAgIGZvbGRlckFycmF5ID0gbmV3IEZvbGRlckFycmF5KFtdKTtcbiAgICB9XG5cbn0gZWxzZXtcbiAgICBmb2xkZXJBcnJheSA9IG5ldyBGb2xkZXJBcnJheShbXSk7XG59XG5cbmRpc3BsYXlGb2xkZXJzKCk7XG5cbi8vRGlzcGxheSBhIHBvcHVwIHdpdGggYSBwYWdlIGNvdmVyIHNvIHRoZSByZXN0IG9mIHRoZSBwYWdlIGNhbm5vdCBiZSBpbnRlcmFjdGVkIHdpdGhcbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVGb2xkZXIoKSB7XG4gICAgZm9sZGVyUG9wdXAuc2V0QXR0cmlidXRlKCdzdHlsZScsICdkaXNwbGF5OiBibG9jazsnKTtcbiAgICBwYWdlQ292ZXIuc2V0QXR0cmlidXRlKCdzdHlsZScsICdkaXNwbGF5OiBibG9jazsnKTtcbn1cblxuLy9DYWxsZWQgYWZ0ZXIgdGhlIGRlbGV0ZSBpY29uIGhhcyBiZWVuIHNlbGVjdGVkXG5mdW5jdGlvbiBkZWxldGVGb2xkZXIoZWxlbWVudCkge1xuICAgIGZvbGRlckFycmF5LnJlbW92ZUZvbGRlcihlbGVtZW50KTtcblxuICAgIGZvbGRlckFycmF5LnJlbW92ZUNoaWxkKGVsZW1lbnQpO1xuXG4gICAgLy9VdGlsaXplIGxvY2FsIHN0b3JhZ2UgaWYgYXZhaWxhYmxlXG4gICAgaWYoc3RvcmFnZUF2YWlsYWJsZSgnbG9jYWxTdG9yYWdlJykpe1xuICAgICAgICBzdG9yZUZvbGRlckFycmF5KCk7XG4gICAgfVxuXG4gICAgbG9hZEhvbWUoKTtcbn1cblxuLy9DYWxsZWQgYWZ0ZXIgY2hlY2tpbmcgdGhhdCBsb2NhbCBzdG9yYWdlIGlzIGF2YWlsYWJsZSB0byBzdG9yZSBmb2xkZXIgYXJyYXlcbmZ1bmN0aW9uIHN0b3JlRm9sZGVyQXJyYXkoKSB7XG4gICAgLy9TZXJpYWxpemUgZm9sZGVyIGFycmF5IHRvIG1ha2UgaXQgZWFzaWVyIHRvIHN0b3JlIGFuZCBhY2Nlc3NcbiAgICBjb25zdCBmb2xkZXJBcnJheVNlcmlhbGl6ZWQgPSBKU09OLnN0cmluZ2lmeShmb2xkZXJBcnJheS5hcnJheSk7XG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJmb2xkZXJBcnJheVwiLCBmb2xkZXJBcnJheVNlcmlhbGl6ZWQpO1xufVxuXG4vL0NhbGxlZCBhZnRlciBjYW5jZWxsaW5nIG91dCBvbiBwb3B1cCBhbmQgYWZ0ZXIgaW5wdXQgaGFzIGJlZW4gYWNjZXNzZWRcbmZ1bmN0aW9uIGNsZWFySW5wdXQoKSB7XG4gICAgcGFnZUNvdmVyLnNldEF0dHJpYnV0ZSgnc3R5bGUnLCAnZGlzcGxheTogbm9uZTsnKTtcbiAgICBmb2xkZXJQb3B1cC5zZXRBdHRyaWJ1dGUoJ3N0eWxlJywgJ2Rpc3BsYXk6IG5vbmUnKTtcbiAgICBmb2xkZXJJbnB1dC5nZXRFbGVtZW50KCkudmFsdWUgPSBcIlwiO1xufVxuXG5mdW5jdGlvbiBkaXNwbGF5Rm9sZGVycygpe1xuICAgIC8vQ2xlYXIgb3V0IGVsZW1lbnQgYmVmb3JlIGRpc3BsYXlpbmcgZm9sZGVyc1xuICAgIGZvbGRlckFycmF5LmdldEVsZW1lbnQoKS5pbm5lckhUTUwgPSAnJztcblxuICAgIGZvbGRlckFycmF5LmFycmF5LmZvckVhY2goKGZvbGRlcikgPT4ge1xuICAgICAgICBjb25zdCBmb2xkZXJFbGVtZW50ID0gbmV3IEVsZW1lbnQoJ2xpJyk7XG4gICAgICAgIC8vV2hlbiBwYXNzaW5nIGlkLCB1dGlsaXplIHRpdGxlIGJ1dCB3aXRob3V0IHNwYWNlcyB0byBub3QgY2F1c2UgZXJyb3JzIGluIHRoZSBET01cbiAgICAgICAgZm9sZGVyRWxlbWVudC5jcmVhdGVFbGVtZW50KGZvbGRlckFycmF5LmdldEVsZW1lbnQoKSwgZm9sZGVyLnRpdGxlLnNwbGl0KCcgJykuam9pbignJykpO1xuICAgICAgICBmb2xkZXJFbGVtZW50LmFkZEljb24oZm9sZGVySWNvbik7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBmb2xkZXJTcGFuID0gbmV3IEVsZW1lbnQoJ3NwYW4nKTtcbiAgICAgICAgLy9XaGVuIHBhc3NpbmcgaWQsIHV0aWxpemUgdGl0bGUgYnV0IHdpdGhvdXQgc3BhY2VzIHRvIG5vdCBjYXVzZSBlcnJvcnMgaW4gdGhlIERPTVxuICAgICAgICBmb2xkZXJTcGFuLmNyZWF0ZUVsZW1lbnQoZm9sZGVyRWxlbWVudC5nZXRFbGVtZW50KCksIGZvbGRlci50aXRsZS5zcGxpdCgnICcpLmpvaW4oJycpKTtcbiAgICAgICAgZm9sZGVyU3Bhbi5zZXRUZXh0KGZvbGRlci50aXRsZSk7XG5cbiAgICAgICAgZm9sZGVyU3Bhbi5zZXRFdmVudCgnY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICBsb2FkRm9sZGVyKGZvbGRlci50aXRsZSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGZvbGRlckVsZW1lbnQuYWRkSWNvbihkZWxldGVJY29uKTtcblxuICAgICAgICAvL0FjY2VzcyB0aGUgY29ycmVjdCBlbGVtZW50IGJ5IGlkIHNlbGVjdG9yXG4gICAgICAgIGNvbnN0IGRlbGV0ZUljb25FbGVtZW50ID0gbmV3IEVsZW1lbnQoYCR7Zm9sZGVyRWxlbWVudC5lbGVtZW50fT5pbWc6bGFzdC1jaGlsZGApO1xuICAgICAgICBkZWxldGVJY29uRWxlbWVudC5zZXRFdmVudCgnY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICBkZWxldGVGb2xkZXIoZGVsZXRlSWNvbkVsZW1lbnQuZ2V0RWxlbWVudCgpLnBhcmVudEVsZW1lbnQpO1xuICAgICAgICB9KTtcblxuICAgIH0pO1xufVxuXG5mdW5jdGlvbiBhZGRGb2xkZXIoKXtcbiAgICBjb25zdCBmb2xkZXJOYW1lID0gZm9sZGVySW5wdXQuZ2V0RWxlbWVudCgpLnZhbHVlO1xuXG4gICAgLy9EbyBub3QgYWxsb3cgdXNlciB0byBlbnRlciBhbiBlbXB0eSBmb2xkZXIgbmFtZSBieSBza2lwcGluZyBvdmVyIHJlc3Qgb2YgYWRkIGZvbGRlciBhbGdvcml0aG1cbiAgICBpZihmb2xkZXJOYW1lPT09Jycpe1xuICAgICAgICBhbGVydCgnUGxlYXNlIGVudGVyIGEgdGl0bGUgZm9yIHRoZSBmb2xkZXInKTtcbiAgICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgLy9EbyBub3QgYWxsb3cgZm9sZGVycyB3aXRoIHRoZSBzYW1lIG5hbWUgdG8gZXhpc3QgYnkgZGlzcGxheWluZyBtZXNzYWdlIGFuZCBza2lwcGluZyBvdmVyIGFkZCBmb2xkZXIgYWxnb3JpdGhtXG4gICAgY29uc3QgZm9sZGVyRXhpc3RzID0gZm9sZGVyQXJyYXkuYXJyYXkuZmluZCgoZm9sZGVyKSA9PiB7XG4gICAgICAgIHJldHVybiBmb2xkZXIudGl0bGUgPT09IGZvbGRlck5hbWU7XG4gICAgfSk7XG4gICAgaWYoZm9sZGVyRXhpc3RzIT09dW5kZWZpbmVkKXtcbiAgICAgICAgYWxlcnQoJ1RoYXQgZm9sZGVyIGFscmVhZHkgZXhpc3RzLiBQbGVhc2UgcGljayBhbm90aGVyIG5hbWUuJyk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvL0FueXRoaW5nIHRoYXQgaGFzIG1hZGUgaXQgaGVyZSBoYXMgYSB0aXRsZSBhbmQgdGhhdCB0aXRsZSBpcyBub3QgYSBkdXBsaWNhdGVcbiAgICBjb25zdCBmb2xkZXIgPSBuZXcgRm9sZGVyKGZvbGRlck5hbWUpO1xuICAgIGZvbGRlckFycmF5LnB1c2hGb2xkZXIoZm9sZGVyKTtcbiAgICBjbGVhcklucHV0KCk7XG4gICAgZGlzcGxheUZvbGRlcnMoKTtcblxuICAgIC8vVXRpbGl6ZSBsb2NhbCBzdG9yYWdlIGlmIGF2YWlsYWJsZVxuICAgIGlmKHN0b3JhZ2VBdmFpbGFibGUoJ2xvY2FsU3RvcmFnZScpKXtcbiAgICAgICAgc3RvcmVGb2xkZXJBcnJheSgpOyBcbiAgICB9XG59XG5cbi8vRGlzcGxheSBhcHByb3ByaWF0ZSBmb2xkZXIgbmFtZSBhbmQgbmV3IHRhc2sgYnV0dG9uIHVuZGVyIGVhY2ggZm9sZGVyXG5mdW5jdGlvbiBsb2FkRm9sZGVyKGZvbGRlcikge1xuICAgIGxvYWRIZWFkZXIoZm9sZGVyKTtcbiAgICB0YXNrLnNldEF0dHJpYnV0ZSgnc3R5bGUnLCAnZGlzcGxheTogYmxvY2snKTtcbiAgICBkaXNwbGF5VGFza3MoZm9sZGVyKTtcbn1cblxuLy9MaXN0ZW5lcnMgZm9yIHRoZSBuZXcgZm9sZGVyIHBvcHVwXG5hZGRCdXR0b24uc2V0RXZlbnQoJ2NsaWNrJywgYWRkRm9sZGVyKTtcbmNhbmNlbEJ1dHRvbi5zZXRFdmVudCgnY2xpY2snLCBjbGVhcklucHV0KTtcbiIsImltcG9ydCB7IEVsZW1lbnQgfSBmcm9tICcuL2VsZW1lbnQuanMnO1xuaW1wb3J0IHsgdGFzayB9IGZyb20gJy4vaW5kZXguanMnO1xuaW1wb3J0IHsgZGlzcGxheVRhc2tzIH0gZnJvbSBcIi4vdGFzay5qc1wiO1xuXG5leHBvcnQgZnVuY3Rpb24gbG9hZEhlYWRlcihoZWFkZXJUZXh0KXtcbiAgICBjb25zdCBjb250ZW50SGVhZGVyID0gbmV3IEVsZW1lbnQoJ2Rpdi5jb250ZW50PmgyJyk7XG4gICAgY29udGVudEhlYWRlci5zZXRUZXh0KGhlYWRlclRleHQpO1xufVxuXG4vL0Rpc3BsYXkgYXBwcm9wcmlhdGUgaGVhZGVyIGFuZCBuZXcgdGFzayBidXR0b24gdW5kZXIgYWxsIHRhc2tzXG5leHBvcnQgZnVuY3Rpb24gbG9hZEhvbWUoKXtcbiAgICBsb2FkSGVhZGVyKCdBbGwgVGFza3MnKTtcbiAgICB0YXNrLnNldEF0dHJpYnV0ZSgnc3R5bGUnLCAnZGlzcGxheTogYmxvY2snKTtcbiAgICBjb25zdCB0YXNrQXJyYXkgPSBkaXNwbGF5VGFza3MoJ0FsbCBUYXNrcycpO1xufSIsImltcG9ydCB7IGxvYWRIZWFkZXIgfSBmcm9tICcuL2hvbWUuanMnO1xuaW1wb3J0IHsgdGFzayB9IGZyb20gJy4vaW5kZXguanMnO1xuaW1wb3J0IHsgZGlzcGxheVRhc2tzIH0gZnJvbSAnLi90YXNrLmpzJztcblxuLy9BbnkgdGFzayB3aXRoIGEgcHJpb3JpdHkgb2YgaGlnaCB3aWxsIGJlIGRpc3BsYXllZFxuZXhwb3J0IGZ1bmN0aW9uIGxvYWRJbXBvcnRhbnQoKSB7XG4gICAgbG9hZEhlYWRlcignSW1wb3J0YW50Jyk7XG4gICAgLy9IaWRlIHRoZSBuZXcgdGFzayBidXR0b25cbiAgICB0YXNrLnNldEF0dHJpYnV0ZSgnc3R5bGUnLCAnZGlzcGxheTogbm9uZScpO1xuICAgIGRpc3BsYXlUYXNrcygnaGlnaCcpO1xufSIsImltcG9ydCB7IEVsZW1lbnQsIGxvYWRIb21lLCBsb2FkVG9kYXksIGxvYWRUaGlzV2VlaywgbG9hZEltcG9ydGFudCwgY3JlYXRlRm9sZGVyLCBjcmVhdGVUYXNrIH0gZnJvbSAnLi9hZ2dyZWdhdG9yLmpzJztcbmltcG9ydCAnLi9zdHlsZS5jc3MnO1xuXG5leHBvcnQgY29uc3QgdGFzayA9IG5ldyBFbGVtZW50KCdkaXYuY29udGVudD5idXR0b246bnRoLWNoaWxkKDIpJyk7XG50YXNrLnNldEV2ZW50KCdjbGljaycsIGNyZWF0ZVRhc2spO1xuXG5sb2FkSG9tZSgpO1xuXG5jb25zdCBob21lID0gbmV3IEVsZW1lbnQoJ3VsLm5hdj5saTpmaXJzdC1jaGlsZCcpO1xuaG9tZS5zZXRFdmVudCgnY2xpY2snLCBsb2FkSG9tZSk7XG5cbmNvbnN0IHRvZGF5ID0gbmV3IEVsZW1lbnQoJ3VsLm5hdj5saTpudGgtY2hpbGQoMiknKTtcbnRvZGF5LnNldEV2ZW50KCdjbGljaycsIGxvYWRUb2RheSk7XG5cbmNvbnN0IHRoaXNXZWVrID0gbmV3IEVsZW1lbnQoJ3VsLm5hdj5saTpudGgtY2hpbGQoMyknKTtcbnRoaXNXZWVrLnNldEV2ZW50KCdjbGljaycsIGxvYWRUaGlzV2Vlayk7XG5cbmNvbnN0IGltcG9ydGFudCA9IG5ldyBFbGVtZW50KCd1bC5uYXY+bGk6bGFzdC1jaGlsZCcpO1xuaW1wb3J0YW50LnNldEV2ZW50KCdjbGljaycsIGxvYWRJbXBvcnRhbnQpO1xuXG5jb25zdCBmb2xkZXIgPSBuZXcgRWxlbWVudCgnZGl2LmZvbGRlcnM+YnV0dG9uOmZpcnN0LWNoaWxkJyk7XG5mb2xkZXIuc2V0RXZlbnQoJ2NsaWNrJywgY3JlYXRlRm9sZGVyKTtcbiIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHN0b3JhZ2VBdmFpbGFibGUodHlwZSkge1xuICAgIGxldCBzdG9yYWdlO1xuICAgIHRyeSB7XG4gICAgICAgIHN0b3JhZ2UgPSB3aW5kb3dbdHlwZV07XG4gICAgICAgIGNvbnN0IHggPSAnX19zdG9yYWdlX3Rlc3RfXyc7XG4gICAgICAgIHN0b3JhZ2Uuc2V0SXRlbSh4LCB4KTtcbiAgICAgICAgc3RvcmFnZS5yZW1vdmVJdGVtKHgpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgcmV0dXJuIGUgaW5zdGFuY2VvZiBET01FeGNlcHRpb24gJiYgKFxuICAgICAgICAgICAgLy8gZXZlcnl0aGluZyBleGNlcHQgRmlyZWZveFxuICAgICAgICAgICAgZS5jb2RlID09PSAyMiB8fFxuICAgICAgICAgICAgLy8gRmlyZWZveFxuICAgICAgICAgICAgZS5jb2RlID09PSAxMDE0IHx8XG4gICAgICAgICAgICAvLyB0ZXN0IG5hbWUgZmllbGQgdG9vLCBiZWNhdXNlIGNvZGUgbWlnaHQgbm90IGJlIHByZXNlbnRcbiAgICAgICAgICAgIC8vIGV2ZXJ5dGhpbmcgZXhjZXB0IEZpcmVmb3hcbiAgICAgICAgICAgIGUubmFtZSA9PT0gJ1F1b3RhRXhjZWVkZWRFcnJvcicgfHxcbiAgICAgICAgICAgIC8vIEZpcmVmb3hcbiAgICAgICAgICAgIGUubmFtZSA9PT0gJ05TX0VSUk9SX0RPTV9RVU9UQV9SRUFDSEVEJykgJiZcbiAgICAgICAgICAgIC8vIGFja25vd2xlZGdlIFF1b3RhRXhjZWVkZWRFcnJvciBvbmx5IGlmIHRoZXJlJ3Mgc29tZXRoaW5nIGFscmVhZHkgc3RvcmVkXG4gICAgICAgICAgICAoc3RvcmFnZSAmJiBzdG9yYWdlLmxlbmd0aCAhPT0gMCk7XG4gICAgfVxufSIsImltcG9ydCB7IEVsZW1lbnQgfSBmcm9tICcuL2VsZW1lbnQuanMnO1xuaW1wb3J0IHsgcGFnZUNvdmVyIH0gZnJvbSAnLi9mb2xkZXIuanMnO1xuaW1wb3J0IGRlbGV0ZUljb24gZnJvbSAnLi9pY29ucy9kZWxldGUuc3ZnJztcbmltcG9ydCBlZGl0SWNvbiBmcm9tICcuL2ljb25zL2VkaXQuc3ZnJztcbmltcG9ydCBzdG9yYWdlQXZhaWxhYmxlIGZyb20gJy4vc3RvcmFnZS5qcyc7XG5cbi8vRXh0ZW5kIEVsZW1lbnQgdG8gdGFrZSBhZHZhbnRhZ2Ugb2YgcHJvdG90eXBlIG1ldGhvZHNcbmNsYXNzIFRhc2sgZXh0ZW5kcyBFbGVtZW50IHtcbiAgICBjb25zdHJ1Y3Rvcih0aXRsZSwgZGVzY3JpcHRpb24sIGRhdGVUaW1lLCBwcmlvcml0eSwgZm9sZGVyLCBjb21wbGV0ZSl7XG4gICAgICAgIHN1cGVyKCdsaScpO1xuICAgICAgICB0aGlzLnRpdGxlID0gdGl0bGU7XG4gICAgICAgIHRoaXMuZGVzY3JpcHRpb24gPSBkZXNjcmlwdGlvbjtcbiAgICAgICAgdGhpcy5kYXRlVGltZSA9IGRhdGVUaW1lO1xuICAgICAgICB0aGlzLnByaW9yaXR5ID0gcHJpb3JpdHk7XG4gICAgICAgIHRoaXMuZm9sZGVyID0gZm9sZGVyO1xuICAgICAgICB0aGlzLmNvbXBsZXRlID0gY29tcGxldGU7XG4gICAgfVxufVxuXG4vL0V4dGVuZCBFbGVtZW50IHRvIHRha2UgYWR2YW50YWdlIG9mIHByb3RvdHlwZSBtZXRob2RzXG5jbGFzcyBUYXNrQXJyYXkgZXh0ZW5kcyBFbGVtZW50IHtcbiAgICBjb25zdHJ1Y3RvcihhcnJheSkge1xuICAgICAgICBzdXBlcignZGl2LmNvbnRlbnQ+dWwnKTtcbiAgICAgICAgdGhpcy5hcnJheSA9IGFycmF5O1xuICAgIH1cblxuICAgIHB1c2hUYXNrKHRhc2spIHtcbiAgICAgICAgdGhpcy5hcnJheS5wdXNoKHRhc2spO1xuICAgIH1cblxuICAgIHN1YkFycmF5KGZvbGRlciwgZGF0ZSkge1xuICAgICAgICAvL0RhdGUgdmFsdWUgaXMgcGFzc2VkIGZvcm0gdG9kYXkgbW9kdWxlIHdoZW4gc2VsZWN0ZWRcbiAgICAgICAgaWYoZGF0ZT09PSd0b2RheScpe1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYXJyYXkuZmlsdGVyKChpdGVtKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgaXRlbURhdGUgPSBpdGVtLmRhdGVUaW1lO1xuICAgICAgICAgICAgICAgIGNvbnN0IGl0ZW1EYXRlU3RyaW5nID0gaXRlbURhdGUuc3Vic3RyaW5nKDAsIDEwKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gaXRlbURhdGVTdHJpbmcgPT09IGZvbGRlcjtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAvL0RhdGUgdmFsdWUgaXMgcGFzc2VkIGZyb20gdGhpcyB3ZWVrIG1vZHVsZSB3aGVuIHNlbGVjdGVkXG4gICAgICAgIH0gZWxzZSBpZihkYXRlPT09J3RoaXNXZWVrJyl7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5hcnJheS5maWx0ZXIoKGl0ZW0pID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBpdGVtRGF0ZSA9IGl0ZW0uZGF0ZVRpbWU7XG4gICAgICAgICAgICAgICAgY29uc3QgaXRlbVllYXJNb250aCA9IGl0ZW1EYXRlLnN1YnN0cmluZygwLCA3KTtcbiAgICAgICAgICAgICAgICBjb25zdCBmb2xkZXJZZWFyTW9udGggPSBmb2xkZXIuc3Vic3RyaW5nKDAsIDcpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGZvbGRlckRheSA9IHBhcnNlSW50KGZvbGRlci5zdWJzdHJpbmcoOCwgMTApKTtcbiAgICAgICAgICAgICAgICBjb25zdCBpdGVtRGF5ID0gcGFyc2VJbnQoaXRlbURhdGUuc3Vic3RyaW5nKDgsIDEwKSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIChpdGVtWWVhck1vbnRoID09PSBmb2xkZXJZZWFyTW9udGgpICYmIChpdGVtRGF5IC0gZm9sZGVyRGF5IDwgNykgJiYgKGl0ZW1EYXkgLSBmb2xkZXJEYXkgPj0gMCk7IFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIC8vRm9sZGVyIHZhbHVlIG9mIGhpZ2ggaXMgcGFzc2VkIGZyb20gaW1wb3J0YW50IFxuICAgICAgICB9IGVsc2UgaWYoZm9sZGVyPT09J2hpZ2gnKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5hcnJheS5maWx0ZXIoKGl0ZW0pID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gaXRlbS5wcmlvcml0eSA9PT0gZm9sZGVyO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuXG4gICAgICAgIC8vV2lsbCBiZSBjYWxsZWQgd2hlbiBhIHVzZXIgZ2VuZXJhdGVkIGZvbGRlciBpcyBwYXNzZWRcbiAgICAgICAgcmV0dXJuIHRoaXMuYXJyYXkuZmlsdGVyKChpdGVtKSA9PiB7XG4gICAgICAgICAgIHJldHVybiBpdGVtLmZvbGRlciA9PT0gZm9sZGVyO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICByZW1vdmVUYXNrKGVsZW1lbnQpIHtcbiAgICAgICAgY29uc3QgaW5kZXggPSB0aGlzLmFycmF5LmZpbmRJbmRleCgodGFzaykgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHRhc2suZWxlbWVudCA9PT0gYGxpIyR7ZWxlbWVudC5pZH1gO1xuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIHRoaXMuYXJyYXkuc3BsaWNlKGluZGV4LCAxKTtcbiAgICB9XG59XG5cbmNvbnN0IGFkZFRhc2tCdXR0b24gPSBuZXcgRWxlbWVudCgnZGl2LnRhc2tQb3B1cD5mb3JtPmJ1dHRvbjpudGgtbGFzdC1jaGlsZCgyKScpO1xuY29uc3QgY2FuY2VsVGFza0J1dHRvbiA9IG5ldyBFbGVtZW50KCdkaXYudGFza1BvcHVwPmZvcm0+YnV0dG9uOmxhc3QtY2hpbGQnKTtcbmNvbnN0IGFkZEVkaXRUYXNrQnV0dG9uID0gbmV3IEVsZW1lbnQoJ2Rpdi5lZGl0VGFza1BvcHVwPmZvcm0+YnV0dG9uOm50aC1sYXN0LWNoaWxkKDIpJyk7XG5jb25zdCBjYW5jZWxFZGl0VGFza0J1dHRvbiA9IG5ldyBFbGVtZW50KCdkaXYuZWRpdFRhc2tQb3B1cD5mb3JtPmJ1dHRvbjpsYXN0LWNoaWxkJyk7XG5jb25zdCB0YXNrVGl0bGVJbnB1dCA9IG5ldyBFbGVtZW50KCdkaXYudGFza1BvcHVwPmZvcm0+aW5wdXQjdGl0bGUnKTtcbmNvbnN0IHRhc2tEZXNjcmlwdGlvbklucHV0ID0gbmV3IEVsZW1lbnQoJ2Rpdi50YXNrUG9wdXA+Zm9ybT50ZXh0YXJlYSNkZXNjcmlwdGlvbicpO1xuY29uc3QgdGFza0RhdGVUaW1lSW5wdXQgPSBuZXcgRWxlbWVudCgnZGl2LnRhc2tQb3B1cD5mb3JtPmlucHV0I2RhdGVUaW1lJyk7XG5jb25zdCB0YXNrUG9wdXAgPSBuZXcgRWxlbWVudCgnZGl2LnRhc2tQb3B1cCcpO1xuY29uc3QgdGFza1ByaW9yaXR5SW5wdXQgPSBuZXcgRWxlbWVudCgnZGl2LnRhc2tQb3B1cD5mb3JtPmRpdj5pbnB1dFt0eXBlPVwicmFkaW9cIl06Y2hlY2tlZCcpO1xuY29uc3QgZWRpdFRhc2tQb3B1cCA9IG5ldyBFbGVtZW50KCdkaXYuZWRpdFRhc2tQb3B1cCcpO1xuY29uc3QgZWRpdFRhc2tUaXRsZUlucHV0ID0gbmV3IEVsZW1lbnQoJ2Rpdi5lZGl0VGFza1BvcHVwPmZvcm0+aW5wdXQjZWRpdFRpdGxlJyk7XG5jb25zdCBlZGl0VGFza0Rlc2NyaXB0aW9uSW5wdXQgPSBuZXcgRWxlbWVudCgnZGl2LmVkaXRUYXNrUG9wdXA+Zm9ybT50ZXh0YXJlYSNlZGl0RGVzY3JpcHRpb24nKTtcbmNvbnN0IGVkaXRUYXNrRGF0ZVRpbWVJbnB1dCA9IG5ldyBFbGVtZW50KCdkaXYuZWRpdFRhc2tQb3B1cD5mb3JtPmlucHV0I2VkaXREYXRlVGltZScpO1xuY29uc3QgZWRpdFRhc2tQcmlvcml0eUlucHV0ID0gbmV3IEVsZW1lbnQoJ2Rpdi5lZGl0VGFza1BvcHVwPmZvcm0+ZGl2PmlucHV0W3R5cGU9XCJyYWRpb1wiXTpjaGVja2VkJyk7XG5jb25zdCBkZXRhaWxzUG9wdXAgPSBuZXcgRWxlbWVudCgnZGl2LmRldGFpbHNQb3B1cCcpO1xuY29uc3QgY2xvc2VEZXRhaWxzSWNvbiA9IG5ldyBFbGVtZW50KCdkaXYuZGV0YWlsc1BvcHVwPmltZzpmaXJzdC1jaGlsZCcpO1xubGV0IGVkaXRFbGVtZW50O1xubGV0IHRhc2tBcnJheTtcblxuLy9VdGlsaXplIGxvY2FsIHN0b3JhZ2UgaWYgYXZhaWxhYmxlXG5pZihzdG9yYWdlQXZhaWxhYmxlKCdsb2NhbFN0b3JhZ2UnKSl7XG4gICAgaWYobG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJ0YXNrQXJyYXlcIikgIT09IG51bGwpe1xuICAgICAgICB0YXNrQXJyYXkgPSBuZXcgVGFza0FycmF5KEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJ0YXNrQXJyYXlcIikpKTtcbiAgICB9IGVsc2V7XG4gICAgICAgIHRhc2tBcnJheSA9IG5ldyBUYXNrQXJyYXkoW10pO1xuICAgIH1cblxufSBlbHNle1xuICAgIHRhc2tBcnJheSA9IG5ldyBUYXNrQXJyYXkoW10pO1xufVxuXG4vL0Rpc3BsYXkgYSBwb3B1cCB3aXRoIGEgcGFnZSBjb3ZlciBzbyB0aGUgcmVzdCBvZiB0aGUgcGFnZSBjYW5ub3QgYmUgaW50ZXJhY3RlZCB3aXRoXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlVGFzaygpIHtcbiAgICBwYWdlQ292ZXIuc2V0QXR0cmlidXRlKCdzdHlsZScsICdkaXNwbGF5OiBibG9jazsnKTtcbiAgICB0YXNrUG9wdXAuc2V0QXR0cmlidXRlKCdzdHlsZScsICdkaXNwbGF5OiBibG9jazsnKTtcbn1cblxuLy9DbGVhciB1c2VyIGlucHV0IHdoZW4gYSBwb3B1cCBpcyBjYW5jZWxlZCBvciBhZnRlciB1c2VyIGluZm8gaGFzIGJlZW4gc3RvcmVkXG5mdW5jdGlvbiBjbGVhclRhc2tJbnB1dCgpe1xuICAgIHBhZ2VDb3Zlci5zZXRBdHRyaWJ1dGUoJ3N0eWxlJywgJ2Rpc3BsYXk6IG5vbmU7Jyk7XG4gICAgdGFza1BvcHVwLnNldEF0dHJpYnV0ZSgnc3R5bGUnLCAnZGlzcGxheTogbm9uZTsnKTtcbiAgICB0YXNrVGl0bGVJbnB1dC5nZXRFbGVtZW50KCkudmFsdWUgPSAnJztcbiAgICB0YXNrRGVzY3JpcHRpb25JbnB1dC5nZXRFbGVtZW50KCkudmFsdWUgPSAnJztcbiAgICB0YXNrRGF0ZVRpbWVJbnB1dC5nZXRFbGVtZW50KCkudmFsdWUgPSAnJztcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdkaXYudGFza1BvcHVwPmZvcm0+ZGl2PmlucHV0I25vbmUnKS5jaGVja2VkID0gdHJ1ZTtcbn1cblxuLyogQSBzZXBhcmF0ZSBwb3B1cCBleGlzdHMgd2hlbiBhIHVzZXIgd2lzaGVzIHRvIGVkaXQgaW5mby4gXG5UaGlzIHdpbGwgY2xlYXIgdXNlciBpbnB1dCB3aGVuIHBvcHVwIGlzIGNhbmNlbGVkIG9yIGFmdGVyIHVzZXIgaW5mbyBoYXMgYmVlbiBzdG9yZWQuICovXG5mdW5jdGlvbiBjbGVhckVkaXRUYXNrSW5wdXQoKSB7XG4gICAgcGFnZUNvdmVyLnNldEF0dHJpYnV0ZSgnc3R5bGUnLCAnZGlzcGxheTogbm9uZScpO1xuICAgIGVkaXRUYXNrUG9wdXAuc2V0QXR0cmlidXRlKCdzdHlsZScsICdkaXNwbGF5OiBub25lJyk7XG4gICAgZWRpdFRhc2tUaXRsZUlucHV0LmdldEVsZW1lbnQoKS52YWx1ZSA9ICcnO1xuICAgIGVkaXRUYXNrRGVzY3JpcHRpb25JbnB1dC5nZXRFbGVtZW50KCkudmFsdWUgPSAnJztcbiAgICBlZGl0VGFza0RhdGVUaW1lSW5wdXQuZ2V0RWxlbWVudCgpLnZhbHVlID0gJyc7XG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignZGl2LmVkaXRUYXNrUG9wdXA+Zm9ybT5kaXY+aW5wdXQjZWRpdE5vbmUnKS5jaGVja2VkID0gdHJ1ZTtcbn1cblxuLy9DcmVhdGVzIGFuZCBhZGRzIGEgbmV3IHRhc2sgZnJvbSB0aGUgdGFzayBwb3B1cFxuZnVuY3Rpb24gYWRkVGFzaygpIHtcblxuICAgIC8vRG8gbm90IGFsbG93IHVzZXIgdG8gZW50ZXIgYW4gZW1wdHkgdGFzayBuYW1lIGJ5IHNraXBwaW5nIG92ZXIgcmVzdCBvZiBhZGQgdGFzayBhbGdvcml0aG1cbiAgICBpZih0YXNrVGl0bGVJbnB1dC5nZXRFbGVtZW50KCkudmFsdWUgPT09ICcnKXtcbiAgICAgICAgYWxlcnQoJ1BsZWFzZSBlbnRlciBhIHRpdGxlIGZvciB0aGUgdGFzay4nKTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vQW55dGhpbmcgdGhhdCBoYXMgbWFkZSBpdCB0aGlzIGZhciBoYXMgdGl0bGUgaW5wdXRcbiAgICBjb25zdCB0YXNrID0gbmV3IFRhc2sodGFza1RpdGxlSW5wdXQuZ2V0RWxlbWVudCgpLnZhbHVlLCB0YXNrRGVzY3JpcHRpb25JbnB1dC5nZXRFbGVtZW50KCkudmFsdWUsIHRhc2tEYXRlVGltZUlucHV0LmdldEVsZW1lbnQoKS52YWx1ZSwgdGFza1ByaW9yaXR5SW5wdXQuZ2V0RWxlbWVudCgpLnZhbHVlLCBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdkaXYuY29udGVudD5oMicpLnRleHRDb250ZW50LCBmYWxzZSk7XG4gICAgdGFza0FycmF5LnB1c2hUYXNrKHRhc2spO1xuICAgIGNsZWFyVGFza0lucHV0KCk7XG5cbiAgICBkaXNwbGF5VGFza3ModGFzay5mb2xkZXIpO1xuXG4gICAgLy9VdGlsaXplIGxvY2FsIHN0b3JhZ2UgaWYgYXZhaWxhYmxlXG4gICAgaWYoc3RvcmFnZUF2YWlsYWJsZSgnbG9jYWxTdG9yYWdlJykpe1xuICAgICAgICBzdG9yZVRhc2tBcnJheSgpOyBcbiAgICB9XG59XG5cbi8vVXBkYXRlcyBleGlzdGluZyBpbnB1dCBmcm9tIHRoZSBlZGl0IHRhc2sgcG9wdXBcbmZ1bmN0aW9uIGFkZEVkaXRUYXNrKCkge1xuICAgIC8vU2VhcmNoIHRoZSB0YXNrIGFycmF5IGZvciB0aGUgaW5kZXggb2YgdGhlIHNlbGVjdGVkIHRhc2sgdG8gZWRpdFxuICAgIGNvbnN0IGluZGV4ID0gdGFza0FycmF5LmFycmF5LmZpbmRJbmRleCgodGFzaykgPT4ge1xuICAgICAgICByZXR1cm4gdGFzay5lbGVtZW50ID09PSBgbGkjJHtlZGl0RWxlbWVudH1gO1xuICAgIH0pO1xuXG4gICAgY29uc3QgZWRpdGVkVGFzayA9IG5ldyBUYXNrKGVkaXRUYXNrVGl0bGVJbnB1dC5nZXRFbGVtZW50KCkudmFsdWUsIGVkaXRUYXNrRGVzY3JpcHRpb25JbnB1dC5nZXRFbGVtZW50KCkudmFsdWUsIGVkaXRUYXNrRGF0ZVRpbWVJbnB1dC5nZXRFbGVtZW50KCkudmFsdWUsIGVkaXRUYXNrUHJpb3JpdHlJbnB1dC5nZXRFbGVtZW50KCkudmFsdWUsIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2Rpdi5jb250ZW50PmgyJykudGV4dENvbnRlbnQsIHRhc2tBcnJheS5hcnJheVtpbmRleF0uY29tcGxldGUpO1xuICAgIC8vUmVwbGFjZSB0aGUgZXhpc3RpbmcgdGFzayB3aXRoIHRoZSBlZGl0ZWQgdGFza1xuICAgIHRhc2tBcnJheS5hcnJheVtpbmRleF0gPSBlZGl0ZWRUYXNrO1xuICAgIGNsZWFyRWRpdFRhc2tJbnB1dCgpO1xuICAgIGRpc3BsYXlUYXNrcyhlZGl0ZWRUYXNrLmZvbGRlcik7XG5cbiAgICAvL1V0aWxpemUgbG9jYWwgc3RvcmFnZSBpZiBhdmFpbGFibGVcbiAgICBpZihzdG9yYWdlQXZhaWxhYmxlKCdsb2NhbFN0b3JhZ2UnKSl7XG4gICAgICAgIHN0b3JlVGFza0FycmF5KCk7IFxuICAgIH1cbn1cblxuLy9EaXNwbGF5IGVkaXQgdGFzayBwb3B1cCB3aXRoIHN0b3JlZCBpbmZvXG5mdW5jdGlvbiBlZGl0VGFzayh0YXNrKSB7XG4gICAgcGFnZUNvdmVyLnNldEF0dHJpYnV0ZSgnc3R5bGUnLCAnZGlzcGxheTogYmxvY2snKTtcbiAgICBlZGl0VGFza1BvcHVwLnNldEF0dHJpYnV0ZSgnc3R5bGUnLCAnZGlzcGxheTogYmxvY2snKTtcbiAgICBlZGl0VGFza1RpdGxlSW5wdXQuZ2V0RWxlbWVudCgpLnZhbHVlID0gdGFzay50aXRsZTtcbiAgICBlZGl0VGFza0Rlc2NyaXB0aW9uSW5wdXQuZ2V0RWxlbWVudCgpLnZhbHVlID0gdGFzay5kZXNjcmlwdGlvbjtcbiAgICBlZGl0VGFza0RhdGVUaW1lSW5wdXQuZ2V0RWxlbWVudCgpLnZhbHVlID0gdGFzay5kYXRlVGltZTtcblxuICAgIC8vQ2hlY2sgdGhlIGNvcnJlY3QgcHJpb3JpdHkgcmFkaW8gYnV0dG9uIGdpdmVuIHRoZSBzdG9yZWQgaW5mb1xuICAgIGlmKHRhc2sucHJpb3JpdHk9PT0nbm9uZScpe1xuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdkaXYuZWRpdFRhc2tQb3B1cD5mb3JtPmRpdj5pbnB1dCNlZGl0Tm9uZScpLmNoZWNrZWQgPSB0cnVlO1xuICAgIH0gZWxzZSBpZih0YXNrLnByaW9yaXR5ID09PSAnbG93Jyl7XG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2Rpdi5lZGl0VGFza1BvcHVwPmZvcm0+ZGl2PmlucHV0I2VkaXRMb3cnKS5jaGVja2VkID0gdHJ1ZTtcbiAgICB9IGVsc2UgaWYodGFzay5wcmlvcml0eSA9PT0gJ21lZGl1bScpIHtcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignZGl2LmVkaXRUYXNrUG9wdXA+Zm9ybT5kaXY+aW5wdXQjZWRpdE1lZGl1bScpLmNoZWNrZWQgPSB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2Rpdi5lZGl0VGFza1BvcHVwPmZvcm0+ZGl2PmlucHV0I2VkaXRIaWdoJykuY2hlY2tlZCA9IHRydWU7XG4gICAgfVxufVxuXG4vL0NhbGxlZCBhZnRlciBjaGVja2luZyB0aGF0IGxvY2FsIHN0b3JhZ2UgaXMgYXZhaWxhYmxlIHRvIHN0b3JlIHRhc2sgYXJyYXlcbmZ1bmN0aW9uIHN0b3JlVGFza0FycmF5KCkge1xuICAgIC8vU2VyaWFsaXplIGZvbGRlciBhcnJheSB0byBtYWtlIGl0IGVhc2llciB0byBzdG9yZSBhbmQgYWNjZXNzXG4gICAgY29uc3QgdGFza0FycmF5U2VyaWFsaXplZCA9IEpTT04uc3RyaW5naWZ5KHRhc2tBcnJheS5hcnJheSk7XG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJ0YXNrQXJyYXlcIiwgdGFza0FycmF5U2VyaWFsaXplZCk7XG5cbn1cblxuLy9DYWxsZWQgYWZ0ZXIgdGhlIGRlbGV0ZSBpY29uIGhhcyBiZWVuIHNlbGVjdGVkXG5mdW5jdGlvbiBkZWxldGVUYXNrKGVsZW1lbnQpIHtcbiAgICB0YXNrQXJyYXkucmVtb3ZlVGFzayhlbGVtZW50KTtcblxuICAgIHRhc2tBcnJheS5yZW1vdmVDaGlsZChlbGVtZW50KTtcblxuICAgIC8vVXRpbGl6ZSBsb2NhbCBzdG9yYWdlIGlmIGF2YWlsYWJsZVxuICAgIGlmKHN0b3JhZ2VBdmFpbGFibGUoJ2xvY2FsU3RvcmFnZScpKXtcbiAgICAgICAgc3RvcmVUYXNrQXJyYXkoKTtcbiAgICB9XG59XG5cbi8vQ2FsbGVkIGFmdGVyIGEgdXNlciBoYXMgc2VsZWN0ZWQgdGhlIGNoZWNrYm94IG5leHQgdG8gYSB0YXNrXG5mdW5jdGlvbiBjaGFuZ2VUYXNrU3RhdHVzKGl0ZW0sIGV2ZW50KSB7XG4gICAgaWYoZXZlbnQudGFyZ2V0LmNoZWNrZWQpIHtcbiAgICAgICAgaXRlbS5jb21wbGV0ZSA9IHRydWU7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgaXRlbS5jb21wbGV0ZSA9IGZhbHNlO1xuICAgIH1cblxuICAgIC8vVXRpbGl6ZSBsb2NhbCBzdG9yYWdlIGlmIGF2YWlsYWJsZVxuICAgIGlmKHN0b3JhZ2VBdmFpbGFibGUoJ2xvY2FsU3RvcmFnZScpKXtcbiAgICAgICAgc3RvcmVUYXNrQXJyYXkoKTsgXG4gICAgfVxufVxuXG4vL0NhbGxlZCBhZnRlciB0aGUgdXNlciBoYXMgc2VsZWN0ZWQgdGhlIGRldGFpbHMgYnV0dG9uIHVuZGVyIGEgdGFza1xuZnVuY3Rpb24gZGlzcGxheURldGFpbHMoaXRlbSkge1xuICAgIHBhZ2VDb3Zlci5zZXRBdHRyaWJ1dGUoJ3N0eWxlJywgJ2Rpc3BsYXk6IGJsb2NrOycpO1xuICAgIGRldGFpbHNQb3B1cC5zZXRBdHRyaWJ1dGUoJ3N0eWxlJywgJ2Rpc3BsYXk6IGJsb2NrOycpO1xuXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignZGl2LmRldGFpbHNQb3B1cD5oMicpLnRleHRDb250ZW50ID0gaXRlbS50aXRsZTtcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdkaXYuZGV0YWlsc1BvcHVwPmRpdi5mb2xkZXI+c3BhbjpsYXN0LWNoaWxkJykudGV4dENvbnRlbnQgPSBpdGVtLmZvbGRlcjtcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdkaXYuZGV0YWlsc1BvcHVwPmRpdi5wcmlvcml0eT5zcGFuOmxhc3QtY2hpbGQnKS50ZXh0Q29udGVudCA9IGl0ZW0ucHJpb3JpdHk7XG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignZGl2LmRldGFpbHNQb3B1cD5kaXYuZHVlRGF0ZT5zcGFuOmxhc3QtY2hpbGQnKS50ZXh0Q29udGVudCA9IGl0ZW0uZGF0ZVRpbWU7XG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignZGl2LmRldGFpbHNQb3B1cD5kaXYuZGVzY3JpcHRpb24+cDpsYXN0LWNoaWxkJykudGV4dENvbnRlbnQgPSBpdGVtLmRlc2NyaXB0aW9uO1xufVxuXG4vL0NhbGxlZCBhZnRlciB0aGUgZXhpdCBpY29uIG9uIHRoZSBkZXRhaWxzIHBvcHVwIGhhcyBiZWVuIHNlbGVjdGVkXG5mdW5jdGlvbiBjbG9zZURldGFpbHNQb3B1cCgpIHtcbiAgICBwYWdlQ292ZXIuc2V0QXR0cmlidXRlKCdzdHlsZScsICdkaXNwbGF5OiBub25lOycpO1xuICAgIGRldGFpbHNQb3B1cC5zZXRBdHRyaWJ1dGUoJ3N0eWxlJywgJ2Rpc3BsYXk6IG5vbmU7Jyk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkaXNwbGF5VGFza3MoZm9sZGVyLCBkYXRlKSB7XG4gICAgbGV0IHN1YkFycmF5O1xuICAgIC8vQ2xlYXIgb3V0IGVsZW1lbnQgYmVmb3JlIGFkZGluZyB0YXNrc1xuICAgIHRhc2tBcnJheS5nZXRFbGVtZW50KCkuaW5uZXJIVE1MID0gJyc7XG5cbiAgICAvL0Rpc3BsYXlzIGFsbCB0YXNrcyB1bmxlc3MgdGhlcmUgaXMgYSBzcGVjaWZpYyBmb2xkZXIgcGFzc2VkXG4gICAgaWYoZm9sZGVyIT09J0FsbCBUYXNrcycpe1xuICAgICAgICBzdWJBcnJheSA9IHRhc2tBcnJheS5zdWJBcnJheShmb2xkZXIsIGRhdGUpO1xuICAgIH0gZWxzZXtcbiAgICAgICAgc3ViQXJyYXkgPSB0YXNrQXJyYXkuYXJyYXk7XG4gICAgfVxuXG4gICAgc3ViQXJyYXkuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICAgICAgICBjb25zdCBsaXN0RWxlbWVudCA9IG5ldyBFbGVtZW50KCdsaScpO1xuICAgICAgICAvL1doZW4gcGFzc2luZyBpZCwgdXRpbGl6ZSB0aXRsZSBidXQgd2l0aG91dCBzcGFjZXMgdG8gbm90IGNhdXNlIGVycm9ycyBpbiB0aGUgRE9NXG4gICAgICAgIGxpc3RFbGVtZW50LmNyZWF0ZUVsZW1lbnQodGFza0FycmF5LmdldEVsZW1lbnQoKSwgaXRlbS50aXRsZS5zcGxpdCgnICcpLmpvaW4oJycpKTtcbiAgICAgICAgaXRlbS5lbGVtZW50ID0gYGxpIyR7bGlzdEVsZW1lbnQuZ2V0RWxlbWVudCgpLmlkfWA7XG5cbiAgICAgICAgLy9DcmVhdGUgYSBjaGVja2JveCBmb3IgZWFjaCB0YXNrIHRoYXQgd2lsbCB0cmFjayB3aGVuIHRoZSB0YXNrIGhhcyBiZWVuIGNvbXBsZXRlZFxuICAgICAgICBjb25zdCB0YXNrQ2hlY2tib3ggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xuICAgICAgICB0YXNrQ2hlY2tib3guYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICBjaGFuZ2VUYXNrU3RhdHVzKGl0ZW0sIGV2ZW50KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRhc2tDaGVja2JveC5zZXRBdHRyaWJ1dGUoJ3R5cGUnLCAnY2hlY2tib3gnKTtcbiAgICAgICAgdGFza0NoZWNrYm94LmlkID0gJ2NvbXBsZXRlJztcbiAgICAgICAgdGFza0NoZWNrYm94LnNldEF0dHJpYnV0ZSgnbmFtZScsICdjb21wbGV0ZScpO1xuICAgICAgICAvL0NoZWNrIGJveCBpZiBoYXMgYmVlbiBzdG9yZWQgd2l0aCBhIGNoZWNrIHZhbHVlIHByZXZpb3VzbHlcbiAgICAgICAgaWYoaXRlbS5jb21wbGV0ZT09PXRydWUpe1xuICAgICAgICAgICAgdGFza0NoZWNrYm94LmNoZWNrZWQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGxpc3RFbGVtZW50LmdldEVsZW1lbnQoKS5hcHBlbmQodGFza0NoZWNrYm94KTtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IHRleHRFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICAgICAgICB0ZXh0RWxlbWVudC50ZXh0Q29udGVudCA9IGl0ZW0udGl0bGU7XG4gICAgICAgIGxpc3RFbGVtZW50LmdldEVsZW1lbnQoKS5hcHBlbmQodGV4dEVsZW1lbnQpO1xuICAgICAgICBjb25zdCBkZXRhaWxzQnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gICAgICAgIGRldGFpbHNCdXR0b24udGV4dENvbnRlbnQgPSAnRGV0YWlscyc7XG4gICAgICAgIGxpc3RFbGVtZW50LmdldEVsZW1lbnQoKS5hcHBlbmQoZGV0YWlsc0J1dHRvbik7XG4gICAgICAgIGRldGFpbHNCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICBkaXNwbGF5RGV0YWlscyhpdGVtKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgbGlzdEVsZW1lbnQuYWRkSWNvbihlZGl0SWNvbik7XG4gICAgICAgIGxpc3RFbGVtZW50LmFkZEljb24oZGVsZXRlSWNvbik7XG5cbiAgICAgICAgLy9BY2Nlc3MgdGhlIGNvcnJlY3QgZWxlbWVudCBieSBpZCBzZWxlY3RvclxuICAgICAgICBjb25zdCBlZGl0SWNvbkVsZW1lbnQgPSBuZXcgRWxlbWVudChgJHtsaXN0RWxlbWVudC5lbGVtZW50fT5pbWc6bnRoLWxhc3QtY2hpbGQoMilgKTtcbiAgICAgICAgZWRpdEljb25FbGVtZW50LnNldEV2ZW50KCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgIGVkaXRFbGVtZW50ID0gZWRpdEljb25FbGVtZW50LmdldEVsZW1lbnQoKS5wYXJlbnRFbGVtZW50LmlkO1xuICAgICAgICAgICAgZWRpdFRhc2soaXRlbSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IGRlbGV0ZUljb25FbGVtZW50ID0gbmV3IEVsZW1lbnQoYCR7bGlzdEVsZW1lbnQuZWxlbWVudH0+aW1nOmxhc3QtY2hpbGRgKTtcbiAgICAgICAgZGVsZXRlSWNvbkVsZW1lbnQuc2V0RXZlbnQoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgZGVsZXRlVGFzayhkZWxldGVJY29uRWxlbWVudC5nZXRFbGVtZW50KCkucGFyZW50RWxlbWVudCk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xufVxuXG4vL0xpc3RlbmVycyBmb3IgbmV3IHRhc2sgcG9wdXBcbmFkZFRhc2tCdXR0b24uc2V0RXZlbnQoJ2NsaWNrJywgYWRkVGFzayk7XG5jYW5jZWxUYXNrQnV0dG9uLnNldEV2ZW50KCdjbGljaycsIGNsZWFyVGFza0lucHV0KTtcblxuLy9MaXN0ZW5lcnMgZm9yIGVkaXQgdGFzayBwb3B1cFxuYWRkRWRpdFRhc2tCdXR0b24uc2V0RXZlbnQoJ2NsaWNrJywgYWRkRWRpdFRhc2spO1xuY2FuY2VsRWRpdFRhc2tCdXR0b24uc2V0RXZlbnQoJ2NsaWNrJywgY2xlYXJFZGl0VGFza0lucHV0KTtcblxuLy9MaXN0ZW5lciBmb3IgZGV0YWlscyBwb3B1cFxuY2xvc2VEZXRhaWxzSWNvbi5zZXRFdmVudCgnY2xpY2snLCBjbG9zZURldGFpbHNQb3B1cCk7XG4iLCJpbXBvcnQgeyBsb2FkSGVhZGVyIH0gZnJvbSAnLi9ob21lLmpzJztcbmltcG9ydCB7IHRhc2sgfSBmcm9tICcuL2luZGV4LmpzJztcbmltcG9ydCB7IGRpc3BsYXlUYXNrcyB9IGZyb20gJy4vdGFzay5qcyc7XG5cblxuLy9EaXNwbGF5IGFwcHJvcHJpYXRlIGhlYWRlciBhbmQgc2VuZCB0b2RheSdzIGRhdGUgdG8gZmluZCB0YXNrcyB0aGF0IG1hdGNoIGRhdGVzIHdpdGhpbiB0aGUgY3VycmVudCB3ZWVrc1xuZXhwb3J0IGZ1bmN0aW9uIGxvYWRUaGlzV2VlaygpIHtcbiAgICBsb2FkSGVhZGVyKCdUaGlzIFdlZWsnKTtcbiAgICAvL0hpZGUgdGhlIG5ldyB0YXNrIGJ1dHRvblxuICAgIHRhc2suc2V0QXR0cmlidXRlKCdzdHlsZScsICdkaXNwbGF5OiBub25lJyk7XG4gICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKCk7XG4gICAgY29uc3QgeWVhciA9IGRhdGUuZ2V0RnVsbFllYXIoKTtcbiAgICBsZXQgbW9udGggPSBkYXRlLmdldE1vbnRoKCkgKyAxO1xuICAgIC8vQWRkIGEgMCBpbiBmcm9udCBvZiBzaW5nbGUgZGlnaXQgbW9udGhzIHRvIG1hdGNoIGhvdyB1c2VyIGlucHV0IGlzIHN0b3JlZFxuICAgIGlmKG1vbnRoPDEwKXtcbiAgICAgICAgbW9udGggPSBgMCR7bW9udGh9YDtcbiAgICB9XG4gICAgY29uc3QgZGF5ID0gZGF0ZS5nZXREYXRlKCk7XG4gICAgLy9NYWtlIHRvZGF5J3MgZGF0ZSBtYXRjaCBob3cgdXNlciBpbnB1dCBpcyBzdG9yZWRcbiAgICBjb25zdCBkYXRlU3RyaW5nID0gYCR7eWVhcn0tJHttb250aH0tJHtkYXl9YDtcbiAgICBkaXNwbGF5VGFza3MoZGF0ZVN0cmluZywgJ3RoaXNXZWVrJyk7XG59IiwiaW1wb3J0IHsgbG9hZEhlYWRlciB9IGZyb20gJy4vaG9tZS5qcyc7XG5pbXBvcnQgeyB0YXNrIH0gZnJvbSAnLi9pbmRleC5qcyc7XG5pbXBvcnQgeyBkaXNwbGF5VGFza3MgfSBmcm9tICcuL3Rhc2suanMnO1xuXG4vL0Rpc3BsYXkgYXBwcm9wcmlhdGUgaGVhZGVyIGFuZCBzZW5kIHRvZGF5J3MgZGF0ZSB0byBmaW5kIHRhc2tzIHRoYXQgbWF0Y2ggdG9kYXkncyBkYXRlXG5leHBvcnQgZnVuY3Rpb24gbG9hZFRvZGF5KCkge1xuICAgIGxvYWRIZWFkZXIoJ1RvZGF5Jyk7XG4gICAgLy9IaWRlIHRoZSBuZXcgdGFzayBidXR0b25cbiAgICB0YXNrLnNldEF0dHJpYnV0ZSgnc3R5bGUnLCAnZGlzcGxheTogbm9uZScpO1xuICAgIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZSgpO1xuICAgIGNvbnN0IHllYXIgPSBkYXRlLmdldEZ1bGxZZWFyKCk7XG4gICAgbGV0IG1vbnRoID0gZGF0ZS5nZXRNb250aCgpICsgMTtcbiAgICAvL01ha2UgdG9kYXkncyBkYXRlIG1hdGNoIGhvdyB1c2VyIGlucHV0IGlzIHN0b3JlZFxuICAgIGlmKG1vbnRoPDEwKXtcbiAgICAgICAgbW9udGggPSBgMCR7bW9udGh9YDtcbiAgICB9XG4gICAgY29uc3QgZGF5ID0gZGF0ZS5nZXREYXRlKCk7XG4gICAgLy9NYWtlIHRvZGF5J3MgZGF0ZSBtYXRjaCBob3cgdXNlciBpbnB1dCBpcyBzdG9yZWRcbiAgICBjb25zdCBkYXRlU3RyaW5nID0gYCR7eWVhcn0tJHttb250aH0tJHtkYXl9YDtcbiAgICBkaXNwbGF5VGFza3MoZGF0ZVN0cmluZywgJ3RvZGF5Jyk7XG59IiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0dmFyIGNhY2hlZE1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF07XG5cdGlmIChjYWNoZWRNb2R1bGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXShtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbiIsIi8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSAobW9kdWxlKSA9PiB7XG5cdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuXHRcdCgpID0+IChtb2R1bGVbJ2RlZmF1bHQnXSkgOlxuXHRcdCgpID0+IChtb2R1bGUpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCB7IGE6IGdldHRlciB9KTtcblx0cmV0dXJuIGdldHRlcjtcbn07IiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5nID0gKGZ1bmN0aW9uKCkge1xuXHRpZiAodHlwZW9mIGdsb2JhbFRoaXMgPT09ICdvYmplY3QnKSByZXR1cm4gZ2xvYmFsVGhpcztcblx0dHJ5IHtcblx0XHRyZXR1cm4gdGhpcyB8fCBuZXcgRnVuY3Rpb24oJ3JldHVybiB0aGlzJykoKTtcblx0fSBjYXRjaCAoZSkge1xuXHRcdGlmICh0eXBlb2Ygd2luZG93ID09PSAnb2JqZWN0JykgcmV0dXJuIHdpbmRvdztcblx0fVxufSkoKTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkpIiwiLy8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yID0gKGV4cG9ydHMpID0+IHtcblx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG5cdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG5cdH1cblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbn07IiwidmFyIHNjcmlwdFVybDtcbmlmIChfX3dlYnBhY2tfcmVxdWlyZV9fLmcuaW1wb3J0U2NyaXB0cykgc2NyaXB0VXJsID0gX193ZWJwYWNrX3JlcXVpcmVfXy5nLmxvY2F0aW9uICsgXCJcIjtcbnZhciBkb2N1bWVudCA9IF9fd2VicGFja19yZXF1aXJlX18uZy5kb2N1bWVudDtcbmlmICghc2NyaXB0VXJsICYmIGRvY3VtZW50KSB7XG5cdGlmIChkb2N1bWVudC5jdXJyZW50U2NyaXB0KVxuXHRcdHNjcmlwdFVybCA9IGRvY3VtZW50LmN1cnJlbnRTY3JpcHQuc3JjXG5cdGlmICghc2NyaXB0VXJsKSB7XG5cdFx0dmFyIHNjcmlwdHMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcInNjcmlwdFwiKTtcblx0XHRpZihzY3JpcHRzLmxlbmd0aCkgc2NyaXB0VXJsID0gc2NyaXB0c1tzY3JpcHRzLmxlbmd0aCAtIDFdLnNyY1xuXHR9XG59XG4vLyBXaGVuIHN1cHBvcnRpbmcgYnJvd3NlcnMgd2hlcmUgYW4gYXV0b21hdGljIHB1YmxpY1BhdGggaXMgbm90IHN1cHBvcnRlZCB5b3UgbXVzdCBzcGVjaWZ5IGFuIG91dHB1dC5wdWJsaWNQYXRoIG1hbnVhbGx5IHZpYSBjb25maWd1cmF0aW9uXG4vLyBvciBwYXNzIGFuIGVtcHR5IHN0cmluZyAoXCJcIikgYW5kIHNldCB0aGUgX193ZWJwYWNrX3B1YmxpY19wYXRoX18gdmFyaWFibGUgZnJvbSB5b3VyIGNvZGUgdG8gdXNlIHlvdXIgb3duIGxvZ2ljLlxuaWYgKCFzY3JpcHRVcmwpIHRocm93IG5ldyBFcnJvcihcIkF1dG9tYXRpYyBwdWJsaWNQYXRoIGlzIG5vdCBzdXBwb3J0ZWQgaW4gdGhpcyBicm93c2VyXCIpO1xuc2NyaXB0VXJsID0gc2NyaXB0VXJsLnJlcGxhY2UoLyMuKiQvLCBcIlwiKS5yZXBsYWNlKC9cXD8uKiQvLCBcIlwiKS5yZXBsYWNlKC9cXC9bXlxcL10rJC8sIFwiL1wiKTtcbl9fd2VicGFja19yZXF1aXJlX18ucCA9IHNjcmlwdFVybDsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm5jID0gdW5kZWZpbmVkOyIsIiIsIi8vIHN0YXJ0dXBcbi8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuLy8gVGhpcyBlbnRyeSBtb2R1bGUgaXMgcmVmZXJlbmNlZCBieSBvdGhlciBtb2R1bGVzIHNvIGl0IGNhbid0IGJlIGlubGluZWRcbnZhciBfX3dlYnBhY2tfZXhwb3J0c19fID0gX193ZWJwYWNrX3JlcXVpcmVfXyhcIi4vc3JjL2luZGV4LmpzXCIpO1xuIiwiIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9